> **Status (2026-02-11): Legacy reference.** This document contains historical notes about removed hooks (`useQueryWithCache`, `useRealtimeSync`).
> Current data layer uses TanStack Query feature hooks in `src/features/*` with shared keys in `src/shared/query/queryKeys.ts`.
## Р‘С‹СЃС‚СЂР°СЏ СЃРїСЂР°РІРєР°: РџР°СЂР°Р»Р»РµР»СЊРЅР°СЏ Р·Р°РіСЂСѓР·РєР° РґР°РЅРЅС‹С…

### Р§С‚Рѕ РёР·РјРµРЅРёР»РѕСЃСЊ?

вњ… РћС‚РґРµР»С‹ Р±РѕР»СЊС€Рµ РЅРµ РјРµСЂС†Р°СЋС‚ РїСЂРё РєР°Р¶РґРѕРј РІРёР·РёС‚Рµ  
вњ… Р’СЃРµ РґР°РЅРЅС‹Рµ Р·Р°РіСЂСѓР¶Р°СЋС‚СЃСЏ РѕРґРЅРѕРІСЂРµРјРµРЅРЅРѕ  
вњ… РСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ РіР»РѕР±Р°Р»СЊРЅС‹Р№ РєРµС€ (TTL: 60 РјРёРЅСѓС‚)

### Р“РґРµ СЌС‚Рѕ СЂРµР°Р»РёР·РѕРІР°РЅРѕ?

- **`components/hooks/useParallelDataLoad.js`** вЂ” РЅРѕРІС‹Р№ С…СѓРє РґР»СЏ РїР°СЂР°Р»Р»РµР»СЊРЅРѕР№ Р·Р°РіСЂСѓР·РєРё
- **`components/hooks/useDepartments.js`** вЂ” РѕР±РЅРѕРІР»РµРЅРѕ РєРµС€РёСЂРѕРІР°РЅРёРµ (60 РјРёРЅ TTL)
- **`app/users/index.jsx`** вЂ” РёСЃРїРѕР»СЊР·СѓРµС‚ РЅРѕРІСѓСЋ РїР°СЂР°Р»Р»РµР»СЊРЅСѓСЋ Р·Р°РіСЂСѓР·РєСѓ

### РљР°Рє СЌС‚Рѕ РёСЃРїРѕР»СЊР·РѕРІР°С‚СЊ РІ РґСЂСѓРіРёС… РјРµСЃС‚Р°С…?

```javascript
import { useParallelDataLoad } from '../../components/hooks/useParallelDataLoad';
import { useUsers } from '../../components/hooks/useUsers';
import { useDepartments } from '../../components/hooks/useDepartments';

// Р’ РєРѕРјРїРѕРЅРµРЅС‚Рµ:
const { users, departments, isLoading, refreshAll } = useParallelDataLoad({
  users: {
    hook: useUsers,
    options: { filters: {...}, enabled: true }
  },
  departments: {
    hook: useDepartments,
    options: { companyId, enabled: true }
  },
  // Р”РѕР±Р°РІСЊС‚Рµ Р»СЋР±С‹Рµ РґСЂСѓРіРёРµ РёСЃС‚РѕС‡РЅРёРєРё РґР°РЅРЅС‹С…...
});

// isLoading = true С‚РѕР»СЊРєРѕ РµСЃР»Рё РћР‘Рђ РёСЃС‚РѕС‡РЅРёРєР° Р·Р°РіСЂСѓР¶Р°СЋС‚СЃСЏ
// РљР°Рє С‚РѕР»СЊРєРѕ РѕРґРёРЅ РёР· РёСЃС‚РѕС‡РЅРёРєРѕРІ РїРѕР»СѓС‡РёР» РґР°РЅРЅС‹Рµ РёР· РєРµС€Р° - РѕРЅ РіРѕС‚РѕРІ Рє РїРѕРєР°Р·Сѓ
```

### Р’Р°Р¶РЅС‹Рµ РјРѕРјРµРЅС‚С‹

1. **РљРµС€РёСЂРѕРІР°РЅРёРµ РѕС‚РґРµР»РѕРІ:**
   - TTL: 60 РјРёРЅСѓС‚ (РѕС‚РґРµР»С‹ РјРµРЅСЏСЋС‚СЃСЏ СЂРµРґРєРѕ)
   - staleTime: 30 РјРёРЅСѓС‚ (РѕР±РЅРѕРІР»СЏРµРј РІ С„РѕРЅРµ РїРѕСЃР»Рµ 30 РјРёРЅСѓС‚)

2. **РџР°СЂР°Р»Р»РµР»СЊРЅР°СЏ Р·Р°РіСЂСѓР·РєР°:**
   - РћР±Р° С…СѓРєР° РёРЅРёС†РёР°Р»РёР·РёСЂСѓСЋС‚СЃСЏ РѕРґРЅРѕРІСЂРµРјРµРЅРЅРѕ
   - РќРµС‚ РѕС‡РµСЂРµРґРё Р·Р°РіСЂСѓР·РѕРє, РІСЃС‘ Р°СЃРёРЅС…СЂРѕРЅРЅРѕ

3. **Pull-to-refresh:**
   - Р’С‹Р·С‹РІР°РµС‚ `refreshAll()` РґР»СЏ РѕР±РЅРѕРІР»РµРЅРёСЏ Р’РЎР•РҐ РґР°РЅРЅС‹С… РѕРґРЅРѕРІСЂРµРјРµРЅРЅРѕ

4. **Realtime СЃРёРЅС…СЂРѕРЅРёР·Р°С†РёСЏ:**
   - РџСЂРѕРґРѕР»Р¶Р°РµС‚ СЂР°Р±РѕС‚Р°С‚СЊ С‡РµСЂРµР· `useRealtimeSync`
   - РћР±РЅРѕРІР»РµРЅРёСЏ РІ Р‘Р” РѕС‚СЂР°Р¶Р°СЋС‚СЃСЏ РІ РѕР±РѕРёС… С…СѓРєР°С…

### РўРµСЃС‚РёСЂРѕРІР°РЅРёРµ

Р§С‚РѕР±С‹ РїСЂРѕРІРµСЂРёС‚СЊ С‡С‚Рѕ СЂР°Р±РѕС‚Р°РµС‚:

1. РћС‚РєСЂРѕР№С‚Рµ СЃС‚СЂР°РЅРёС†Сѓ Users
2. Р—Р°РєСЂРѕР№С‚Рµ Рё РѕС‚РєСЂРѕР№С‚Рµ СЃРЅРѕРІР° (РІ С‚РµС‡РµРЅРёРµ 60 РјРёРЅСѓС‚)
3. РћС‚РґРµР»С‹ РґРѕР»Р¶РЅС‹ Р·Р°РіСЂСѓР¶Р°С‚СЊСЃСЏ **РјРіРЅРѕРІРµРЅРЅРѕ** РёР· РєРµС€Р°
4. РќРµС‚ РјРµСЂС†Р°РЅРёСЏ, РЅРµС‚ РґРѕРїРѕР»РЅРёС‚РµР»СЊРЅС‹С… Р·Р°РїСЂРѕСЃРѕРІ

---

Р”РѕРєСѓРјРµРЅС‚Р°С†РёСЏ: `/PARALLEL_LOADING_SOLUTION.md`
