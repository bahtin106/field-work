> **Status (2026-02-11): Legacy reference.** This document contains historical notes about removed hooks (`useQueryWithCache`, `useRealtimeSync`).
> Current data layer uses TanStack Query feature hooks in `src/features/*` with shared keys in `src/shared/query/queryKeys.ts`.
# рџ”Ґ Р‘С‹СЃС‚СЂР°СЏ РїСЂРѕРІРµСЂРєР° РёСЃРїСЂР°РІР»РµРЅРёСЏ Р±РµСЃРєРѕРЅРµС‡РЅРѕРіРѕ СЃРїРёРЅРЅРµСЂР°

## вњ… Р§С‚Рѕ РёСЃРїСЂР°РІР»РµРЅРѕ

Р”РѕР±Р°РІР»РµРЅС‹ **РіР°СЂР°РЅС‚РёСЂРѕРІР°РЅРЅС‹Рµ С‚Р°Р№РјР°СѓС‚С‹** РЅР° РІСЃРµС… РєСЂРёС‚РёС‡РµСЃРєРёС… РїСѓС‚СЏС… Р·Р°РіСЂСѓР·РєРё:

- вњ… 10 СЃРµРєСѓРЅРґ - useQueryWithCache
- вњ… 15 СЃРµРєСѓРЅРґ - РІСЃРµ Р·Р°РїСЂРѕСЃС‹ Рє Supabase
- вњ… 8 СЃРµРєСѓРЅРґ - getUserRole
- вњ… 5 СЃРµРєСѓРЅРґ - useAuth
- вњ… 12 СЃРµРєСѓРЅРґ - РіР»РѕР±Р°Р»СЊРЅС‹Р№ force ready

## рџ§Є Р‘С‹СЃС‚СЂС‹Р№ С‚РµСЃС‚

1. **Р—Р°РєСЂРѕР№С‚Рµ РїСЂРёР»РѕР¶РµРЅРёРµ** РїРѕР»РЅРѕСЃС‚СЊСЋ РІ Expo Go
2. **РћС‚РєСЂРѕР№С‚Рµ Р·Р°РЅРѕРІРѕ** С‡РµСЂРµР· Expo Go
3. **РћР¶РёРґР°Р№С‚Рµ РјР°РєСЃРёРјСѓРј 12 СЃРµРєСѓРЅРґ**

### вњ… РЈСЃРїРµС€РЅС‹Р№ СЂРµР·СѓР»СЊС‚Р°С‚:

- РџСЂРёР»РѕР¶РµРЅРёРµ Р·Р°РіСЂСѓР·РёР»РѕСЃСЊ Р·Р° 2-5 СЃРµРєСѓРЅРґ
- РР»Рё РїРѕРєР°Р·Р°Р»Рѕ UI С‡РµСЂРµР· РјР°РєСЃРёРјСѓРј 12 СЃРµРєСѓРЅРґ
- РќРёРєР°РєРѕРіРѕ Р±РµСЃРєРѕРЅРµС‡РЅРѕРіРѕ СЃРїРёРЅРЅРµСЂР°

### вќЊ Р•СЃР»Рё РїСЂРѕР±Р»РµРјР° РѕСЃС‚Р°Р»Р°СЃСЊ:

- РџСЂРѕРІРµСЂСЊС‚Рµ РєРѕРЅСЃРѕР»СЊ РЅР° РЅР°Р»РёС‡РёРµ Р»РѕРіРѕРІ:
  ```
  вЏ° useQueryWithCache timeout for ...
  вЏ° getUserRole timeout
  рџљЁ FORCE READY TIMEOUT
  ```
- Р­С‚Рё Р»РѕРіРё РїРѕРєР°Р¶СѓС‚ РіРґРµ РёРјРµРЅРЅРѕ РїСЂРѕРёСЃС…РѕРґРёС‚ Р·Р°РґРµСЂР¶РєР°

## рџ”Ќ Р§С‚Рѕ РёР·РјРµРЅРёР»РѕСЃСЊ

### Р Р°РЅСЊС€Рµ:

```javascript
// РњРѕРі Р·Р°РІРёСЃРЅСѓС‚СЊ РЅР°РІСЃРµРіРґР°
const { data } = await supabase.from('users').select('*');
```

### РўРµРїРµСЂСЊ:

```javascript
// Р“Р°СЂР°РЅС‚РёСЂРѕРІР°РЅРЅС‹Р№ С‚Р°Р№РјР°СѓС‚ 15 СЃРµРєСѓРЅРґ
const timeout = new Promise((_, reject) =>
  setTimeout(() => reject(new Error('Query timeout')), 15000),
);
const result = await Promise.race([queryFn(), timeout]);
```

## рџ“Љ Р—Р°С‰РёС‚Р° РЅР° РІСЃРµС… СѓСЂРѕРІРЅСЏС…

```
Level 1: _layout.js в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв–є 12s force ready
          в†“
Level 2: orders/index.jsx в”Ђв”Ђв”Ђв”Ђв”Ђв–є 8s getUserRole timeout
          в†“
Level 3: useQueryWithCache в”Ђв”Ђв”Ђв”Ђв–є 10s isLoading timeout
          в†“                       15s queryFn timeout
Level 4: useAuth в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв–є 5s getSession timeout
```

## рџљЂ РћР¶РёРґР°РµРјРѕРµ РїРѕРІРµРґРµРЅРёРµ

### РҐРѕР»РѕРґРЅС‹Р№ СЃС‚Р°СЂС‚ (РЅРµС‚ РєСЌС€Р°):

1. РџРѕРєР°Р·С‹РІР°РµС‚СЃСЏ СЃРїРёРЅРЅРµСЂ
2. Р”Р°РЅРЅС‹Рµ Р·Р°РіСЂСѓР¶Р°СЋС‚СЃСЏ 2-5 СЃРµРєСѓРЅРґ
3. UI РїРѕСЏРІР»СЏРµС‚СЃСЏ

### РџРѕРІС‚РѕСЂРЅС‹Р№ Р·Р°РїСѓСЃРє (РµСЃС‚СЊ РєСЌС€):

1. UI РїРѕСЏРІР»СЏРµС‚СЃСЏ **РјРіРЅРѕРІРµРЅРЅРѕ** СЃ РєСЌС€РёСЂРѕРІР°РЅРЅС‹РјРё РґР°РЅРЅС‹РјРё
2. Р”Р°РЅРЅС‹Рµ РѕР±РЅРѕРІР»СЏСЋС‚СЃСЏ РІ С„РѕРЅРµ
3. РќРёРєР°РєРѕРіРѕ СЃРїРёРЅРЅРµСЂР° РµСЃР»Рё РєСЌС€ РІР°Р»РёРґРµРЅ

### РџСЂРѕР±Р»РµРјС‹ СЃ СЃРµС‚СЊСЋ:

1. РџРѕРєР°Р·С‹РІР°РµС‚СЃСЏ РєСЌС€ (РµСЃР»Рё РµСЃС‚СЊ)
2. Р§РµСЂРµР· 10-15 СЃРµРєСѓРЅРґ РїРѕРєР°Р·С‹РІР°РµС‚СЃСЏ UI СЃ РґРѕСЃС‚СѓРїРЅС‹РјРё РґР°РЅРЅС‹РјРё
3. **РќРёРєРѕРіРґР° РЅРµ Р·Р°РІРёСЃР°РµС‚** Р±Р»Р°РіРѕРґР°СЂСЏ С‚Р°Р№РјР°СѓС‚Р°Рј

## рџ’Ў Р›РѕРіРё РґР»СЏ РѕС‚Р»Р°РґРєРё

Р•СЃР»Рё СѓРІРёРґРёС‚Рµ РІ РєРѕРЅСЃРѕР»Рё:

- `вЏ° timeout` - СЃСЂР°Р±РѕС‚Р°Р»Р° Р·Р°С‰РёС‚Р°, РїСЂРѕРІРµСЂСЊС‚Рµ СЃРµС‚СЊ
- `рџљЁ FORCE READY` - РїСЂРёРЅСѓРґРёС‚РµР»СЊРЅР°СЏ СЂР°Р·Р±Р»РѕРєРёСЂРѕРІРєР° РїРѕСЃР»Рµ 12s
- `вњ… State updated` - РЅРѕСЂРјР°Р»СЊРЅР°СЏ СЂР°Р±РѕС‚Р°

## рџ“ќ РР·РјРµРЅС‘РЅРЅС‹Рµ С„Р°Р№Р»С‹

1. `components/hooks/useQueryWithCache.js`
2. `components/hooks/useAuth.js`
3. `components/hooks/useUsers.js`
4. `components/hooks/useDepartments.js`
5. `app/users/index.jsx`
6. `app/orders/index.jsx`

Р’СЃРµ РёР·РјРµРЅРµРЅРёСЏ РЅР°РїСЂР°РІР»РµРЅС‹ РЅР° **РіР°СЂР°РЅС‚РёСЂРѕРІР°РЅРЅСѓСЋ СЂР°Р·Р±Р»РѕРєРёСЂРѕРІРєСѓ UI** РїСЂРё Р»СЋР±С‹С… СѓСЃР»РѕРІРёСЏС….
