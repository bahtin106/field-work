# üìå –ò–¢–û–ì–û–í–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ò –†–ï–®–ï–ù–ò–ï

**–î–∞—Ç–∞:** 3 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–ü—Ä–æ–±–ª–µ–º–∞:** "Invalid credentials" –ø–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞ –Ω–∞ self-hosted Supabase  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏ —Ä–µ—à–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ

---

## –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | Cloud Supabase | Self-Hosted | –°—Ç–∞—Ç—É—Å |
|-----------|---|---|---|
| **public schema** | ‚úÖ orders, profiles –∏ —Ç.–¥. | ‚úÖ –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ | ‚úÖ |
| **auth.users** | ‚úÖ –ï—Å—Ç—å Bahtin106@gmail.com | ‚ùå –ü–£–°–¢–û | ‚ùå –ü–†–û–ë–õ–ï–ú–ê |
| **auth.sessions** | ‚úÖ –ï—Å—Ç—å | ‚ùå –ù–µ—Ç | ‚ùå |
| **auth.refresh_tokens** | ‚úÖ –ï—Å—Ç—å | ‚ùå –ù–µ—Ç | ‚ùå |
| **JWT_SECRET** | ‚úÖ –ï—Å—Ç—å | ‚úÖ –ï—Å—Ç—å (—Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω) | ‚úÖ |

**–ü–æ—á–µ–º—É:** –ü—Ä–∏ `pg_dump` –∏–∑ Cloud –±—ã–ª–∏ –æ—à–∏–±–∫–∏ "must be owner / superuser" –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å—Ö–µ–º–∞—Ö (auth, storage, realtime). –ü–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ–Ω–æ—Å–∏–ª–∏—Å—å —Ç–æ–ª—å–∫–æ `public.*` —Ç–∞–±–ª–∏—Ü—ã.

---

## –†–µ—à–µ–Ω–∏–µ (–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç)

### üü¢ –í–∞—Ä–∏–∞–Ω—Ç 1: SQL (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è - –∑–∞–π–º—ë—Ç 2 –º–∏–Ω—É—Ç—ã)

**–§–∞–π–ª:** `QUICK_AUTH_RECOVERY.md` ‚Üí –í–∞—Ä–∏–∞–Ω—Ç 1

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://supabase.monitorapp.ru/project/default ‚Üí SQL Editor
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ-–≤—Å—Ç–∞–≤—å—Ç–µ SQL –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞
3. –ù–∞–∂–º–∏—Ç–µ Run
4. –ì–æ—Ç–æ–≤–æ - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω ‚úÖ

### üü° –í–∞—Ä–∏–∞–Ω—Ç 2: Edge Function (–ï—Å–ª–∏ SQL –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç)

**–§–∞–π–ª:** `SELFHOSTED_AUTH_RECOVERY.md` ‚Üí –®–∞–≥ 2-3

–¢—Ä–µ–±—É–µ—Ç Supabase CLI, –Ω–æ –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–æ.

### üîµ –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä—è–º–æ–π –∏–º–ø–æ—Ä—Ç –∏–∑ Cloud (–î–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

**–§–∞–π–ª:** `SELFHOSTED_AUTH_RECOVERY.md` ‚Üí –í–∞—Ä–∏–∞–Ω—Ç 3

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ.

---

## –§–∞–π–ª—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏

–Ø —Å–æ–∑–¥–∞–ª –¥–ª—è –≤–∞—Å:

1. **`supabase/functions/restore_user/index.ts`** - Edge Function –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è  
2. **`restore_user.sql`** - SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞  
3. **`restore_user.sh`** - Bash —Å–∫—Ä–∏–ø—Ç –¥–ª—è curl –∫–æ–º–∞–Ω–¥
4. **`QUICK_AUTH_RECOVERY.md`** - ‚≠ê **–ù–ê–ß–ù–ò–¢–ï –û–¢–°–Æ–î–ê** (3-5 –º–∏–Ω—É—Ç)
5. **`SELFHOSTED_AUTH_RECOVERY.md`** - –ü–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥  
6. **`AUTH_MIGRATION_FIX.md`** - –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∏–≥—Ä–∞—Ü–∏–∏

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (5 –º–∏–Ω—É—Ç):
1. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ `QUICK_AUTH_RECOVERY.md`
2. ‚úÖ –í—ã–ø–æ–ª–Ω–∏—Ç–µ **–í–∞—Ä–∏–∞–Ω—Ç 1 (SQL)**
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `SELECT COUNT(*) FROM auth.users;` –¥–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å `1`

### –ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (–ü—Ä–æ–≤–µ—Ä–∫–∞):
```bash
# 1. –û—á–∏—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
expo start -c

# 2. –í–≤–µ–¥–∏—Ç–µ credentials:
Email: Bahtin106@gmail.com
Password: Bahtin106

# 3. –ï—Å–ª–∏ –≤–æ—à–ª–∏ ‚úÖ - –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

### –ï—Å–ª–∏ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: `curl -I https://supabase.monitorapp.ru`
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ error –≤ console –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—Ö–æ–¥–∞ (—è –¥–æ–±–∞–≤–∏–ª —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
3. –î–∞–π—Ç–µ –º–Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `SELECT * FROM auth.users WHERE email = 'Bahtin106@gmail.com';`

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

- [ ] **–®–∞–≥ 1:** –ü—Ä–æ—á–∏—Ç–∞–ª `QUICK_AUTH_RECOVERY.md`
- [ ] **–®–∞–≥ 2:** –í—ã–ø–æ–ª–Ω–∏–ª SQL –≤ Supabase Studio
- [ ] **–®–∞–≥ 3:** –ü—Ä–æ–≤–µ—Ä–∏–ª —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—è–≤–∏–ª—Å—è: `SELECT COUNT(*) FROM auth.users;`
- [ ] **–®–∞–≥ 4:** –û—á–∏—Å—Ç–∏–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `expo start -c`
- [ ] **–®–∞–≥ 5:** –í–æ—à—ë–ª –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å email/–ø–∞—Ä–æ–ª—å ‚úÖ

---

## üÜò –ö–æ–Ω—Ç–∞–∫—Ç

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ó–∞–ø–∏—à–∏—Ç–µ –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `SELECT * FROM auth.users;` –∏ –¥–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
3. –î–∞–π—Ç–µ –º–Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `SELECT COUNT(*) FROM public.profiles;` (–ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å)

---

## üìä –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

**–î–æ:** Cloud Supabase (Cloud) ‚Üí Self-Hosted (–±–µ–∑ auth)  
**–ü–æ—Å–ª–µ:** Self-Hosted —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º ‚úÖ  

**–ü—Ä–∏–º–µ–Ω—ë–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** SQL INSERT –≤ auth.users —Å bcrypt —Ö–µ—à–µ–º –ø–∞—Ä–æ–ª—è  
**–í—Ä–µ–º—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** 2-5 –º–∏–Ω—É—Ç  
**–†–∏—Å–∫:** –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π (—Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
