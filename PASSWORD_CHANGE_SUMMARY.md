# –†–µ–∑—é–º–µ: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–º–µ–Ω–æ–π –ø–∞—Ä–æ–ª—è

## –ü—Ä–æ–±–ª–µ–º–∞
–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –Ω–µ –∑–∞–Ω–æ—Å–∏—Ç—Å—è –≤ –ë–î –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.

## –ü—Ä–∏—á–∏–Ω—ã
1. **–ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è** - –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –±—ã–ª –ª–∏ –ø–∞—Ä–æ–ª—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–µ–Ω
2. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ edge-—Ñ—É–Ω–∫—Ü–∏–∏** - –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—à–∏–±–∫–∞—Ö
3. **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ** - —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–∫—Ä—ã—Ç—ã

## –†–µ—à–µ–Ω–∏–µ

### –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:

1. **supabase/functions/update_user/index.ts** (166 —Å—Ç—Ä–æ–∫)
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏ –∫–æ–Ω—Å–æ–ª–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü—É password_change_log
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ changed_by –ø–∞—Ä–∞–º–µ—Ç—Ä–∞

2. **app/users/[id]/edit.jsx** (2773 —Å—Ç—Ä–æ–∫)
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ `[proceedSave]` –≤–æ –≤—Å–µ —ç—Ç–∞–ø—ã
   - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ changed_by –ø–∞—Ä–∞–º–µ—Ç—Ä–∞

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:

3. **supabase/migrations/20260211_password_change_log.sql** (50 —Å—Ç—Ä–æ–∫)
   - –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
   - –í–∫–ª—é—á–∞–µ—Ç RLS –ø–æ–ª–∏—Ç–∏–∫–∏
   - –°–æ–∑–¥–∞–µ—Ç –∏–Ω–¥–µ–∫—Å—ã

4. **SETUP_PASSWORD_LOGS.sql** (80 —Å—Ç—Ä–æ–∫)
   - SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ Supabase
   - –ú–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ SQL Editor

5. **PASSWORD_CHANGE_FIX_REPORT.md** (200+ —Å—Ç—Ä–æ–∫)
   - –ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–µ –∏ —Ä–µ—à–µ–Ω–∏–∏
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

6. **PASSWORD_CHANGE_CHECKLIST.md** (400+ —Å—Ç—Ä–æ–∫)
   - –ü–æ–¥—Ä–æ–±–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
   - –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —à–∞–≥–∏
   - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

7. **deploy-password-fix.sh** (80 —Å—Ç—Ä–æ–∫)
   - –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ Linux/Mac

8. **deploy-password-fix.bat** (50 —Å—Ç—Ä–æ–∫)
   - –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ Windows

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î (5 –º–∏–Ω—É—Ç)
```
–û—Ç–∫—Ä—ã—Ç—å: https://supabase.monitorapp.ru ‚Üí SQL Editor
–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ: SETUP_PASSWORD_LOGS.sql
–í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç ‚úì
```

### –®–∞–≥ 2: –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å edge-—Ñ—É–Ω–∫—Ü–∏—é (5 –º–∏–Ω—É—Ç)
```
–û—Ç–∫—Ä—ã—Ç—å: https://supabase.monitorapp.ru ‚Üí Edge Functions ‚Üí update_user
–ó–∞–º–µ–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å supabase/functions/update_user/index.ts
–ù–∞–∂–∞—Ç—å Deploy ‚úì
```

### –®–∞–≥ 3: –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã)
```
–ï—Å–ª–∏ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
  eas build --platform ios && eas build --platform android
  –∏–ª–∏ —á–µ—Ä–µ–∑ –æ–±—ã—á–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ App Store / Play Market

–ï—Å–ª–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
  npm run build && deploy
```

### –®–∞–≥ 4: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (5 –º–∏–Ω—É—Ç)
```
–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
–ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä –∫–æ–Ω—Å–æ–ª—å (Developer Tools ‚Üí Console)
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ Supabase Dashboard ‚Üí Edge Functions ‚Üí Logs
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î: SELECT * FROM public.password_change_log;
```

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ü—Ä—è–º–æ —Å–µ–π—á–∞—Å (—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç –ø–∞—Ä–æ–ª—å ‚Üí –ü–∞—Ä–æ–ª—å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ auth.users ‚Üí –ó–∞–ø–∏—Å—å –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –ë–î

### üìä –¢–µ–ø–µ—Ä—å –≤–∏–¥–Ω–æ:
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä –∫–æ–Ω—Å–æ–ª—å –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–∞—Ä–æ–ª—è
- –õ–æ–≥–∏ edge-—Ñ—É–Ω–∫—Ü–∏–∏ –≤ Supabase Dashboard
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ password_change_log
- –ö—Ç–æ, –∫–æ–≥–¥–∞ –∏ –∫–∞–∫ –º–µ–Ω—è–ª –ø–∞—Ä–æ–ª—å (–¥–ª—è –∞—É–¥–∏—Ç–∞)

## –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä –∫–æ–Ω—Å–æ–ª—å** (Developer Tools ‚Üí Console)
   - –î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å –ª–æ–≥–∏ `[proceedSave]`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ edge-—Ñ—É–Ω–∫—Ü–∏–∏** (Supabase Dashboard ‚Üí Edge Functions ‚Üí update_user ‚Üí Logs)
   - –î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å –ª–æ–≥–∏ `[UPDATE_USER]`

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å–æ–∑–¥–∞–Ω–∞ –ª–∏ —Ç–∞–±–ª–∏—Ü–∞** (SQL Editor)
   ```sql
   SELECT * FROM information_schema.tables WHERE table_name = 'password_change_log';
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø–∏—Å–∏ –≤ –ë–î**
   ```sql
   SELECT * FROM public.password_change_log ORDER BY changed_at DESC LIMIT 10;
   ```

5. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ PASSWORD_CHANGE_CHECKLIST.md** - —Ç–∞–º –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º

## –°—Ä–æ–∫–∏

- ‚è±Ô∏è –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ: 10-15 –º–∏–Ω—É—Ç
- üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 5 –º–∏–Ω—É—Ç
- üìä –ò—Ç–æ–≥–æ: 15-20 –º–∏–Ω—É—Ç –Ω–∞ –ø–æ–ª–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏

- [x] Edge-—Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [x] –¢–∞–±–ª–∏—Ü–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∞
- [x] –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±–Ω–æ–≤–ª–µ–Ω
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- [x] –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≥–æ—Ç–æ–≤—ã
- ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è: —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ VPS
- ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è: —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

–í—Å–µ —Ñ–∞–π–ª—ã –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è. –ù—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å SQL —Å–∫—Ä–∏–ø—Ç
2. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å edge-—Ñ—É–Ω–∫—Ü–∏—é
3. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–ª–∏–µ–Ω—Ç
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é! üöÄ
