> **Status (2026-02-11): Legacy reference.** This document contains historical notes about removed hooks (`useQueryWithCache`, `useRealtimeSync`).
> Current data layer uses TanStack Query feature hooks in `src/features/*` with shared keys in `src/shared/query/queryKeys.ts`.
## вњ… Р§РµРєР»РёСЃС‚ РІРЅРµРґСЂРµРЅРёСЏ РїР°СЂР°Р»Р»РµР»СЊРЅРѕР№ Р·Р°РіСЂСѓР·РєРё

### рџ“‹ Р§С‚Рѕ Р±С‹Р»Рѕ СЃРґРµР»Р°РЅРѕ

- вњ… РЎРѕР·РґР°РЅ РЅРѕРІС‹Р№ С…СѓРє `useParallelDataLoad` РґР»СЏ РїР°СЂР°Р»Р»РµР»СЊРЅРѕР№ Р·Р°РіСЂСѓР·РєРё РґР°РЅРЅС‹С…
- вњ… РћР±РЅРѕРІР»РµРЅ С…СѓРє `useDepartments` СЃ СЂР°СЃС€РёСЂРµРЅРЅС‹Рј РєРµС€РёСЂРѕРІР°РЅРёРµРј (60 РјРёРЅ)
- вњ… РРЅС‚РµРіСЂРёСЂРѕРІР°РЅР° РїР°СЂР°Р»Р»РµР»СЊРЅР°СЏ Р·Р°РіСЂСѓР·РєР° РІ `app/users/index.jsx`
- вњ… Р’СЃРµ РёР·РјРµРЅРµРЅРёСЏ РїСЂРѕС‚РµСЃС‚РёСЂРѕРІР°РЅС‹ Р±РµР· Р»РёС‚ РѕС€РёР±РѕРє
- вњ… РЎРѕР·РґР°РЅР° РїРѕРґСЂРѕР±РЅР°СЏ РґРѕРєСѓРјРµРЅС‚Р°С†РёСЏ (3 С„Р°Р№Р»Р°)
- вњ… РљРѕРґ Р·Р°РєРѕРјРјРёС‡РµРЅ РІ git

### рџ§Є РџСЂРѕРІРµСЂРєР° С„СѓРЅРєС†РёРѕРЅР°Р»СЊРЅРѕСЃС‚Рё

**РҐРѕР»РѕРґРЅС‹Р№ СЃС‚Р°СЂС‚ (РїРµСЂРІС‹Р№ РІРёР·РёС‚):**

- [ ] РћС‚РєСЂС‹С‚СЊ СЃС‚СЂР°РЅРёС†Сѓ Users
- [ ] РћР±Р° РёСЃС‚РѕС‡РЅРёРєР° РґР°РЅРЅС‹С… (РїРѕР»СЊР·РѕРІР°С‚РµР»Рё Рё РѕС‚РґРµР»С‹) Р·Р°РіСЂСѓР¶Р°СЋС‚СЃСЏ РѕРґРЅРѕРІСЂРµРјРµРЅРЅРѕ
- [ ] РќРµС‚ РїРѕСЃР»РµРґРѕРІР°С‚РµР»СЊРЅРѕР№ Р·Р°РіСЂСѓР·РєРё (РЅРµ Р¶РґРµРј РѕРґРёРЅ РґР»СЏ РґСЂСѓРіРѕРіРѕ)

**РўРµРїР»С‹Р№ СЃС‚Р°СЂС‚ (РїРѕРІС‚РѕСЂРЅС‹Р№ РІРёР·РёС‚ РІ С‚РµС‡РµРЅРёРµ 60 РјРёРЅ):**

- [ ] РЎС‚СЂР°РЅРёС†Р° РѕС‚РєСЂС‹РІР°РµС‚СЃСЏ РїСЂР°РєС‚РёС‡РµСЃРєРё РјРіРЅРѕРІРµРЅРЅРѕ
- [ ] РћС‚РґРµР»С‹ Р·Р°РіСЂСѓР¶Р°СЋС‚СЃСЏ РёР· РєСЌС€Р° (РЅРµС‚ РјРµСЂС†Р°РЅРёСЏ)
- [ ] РќРµС‚ РЅРѕРІС‹С… Р·Р°РїСЂРѕСЃРѕРІ Рє СЃРµСЂРІРµСЂСѓ РІ Network tab

**Stale-While-Revalidate (С‡РµСЂРµР· 30 РјРёРЅ, РЅРѕ < 60):**

- [ ] Р”Р°РЅРЅС‹Рµ РїРѕРєР°Р·С‹РІР°СЋС‚СЃСЏ СЃСЂР°Р·Сѓ (РёР· РєСЌС€Р°)
- [ ] Р’ С„РѕРЅРµ РїСЂРѕРёСЃС…РѕРґРёС‚ РѕР±РЅРѕРІР»РµРЅРёРµ (РјРѕР¶РЅРѕ СѓРІРёРґРµС‚СЊ РІ Network tab)
- [ ] UI РѕР±РЅРѕРІР»СЏРµС‚СЃСЏ Р°РІС‚РѕРјР°С‚РёС‡РµСЃРєРё РµСЃР»Рё РґР°РЅРЅС‹Рµ РёР·РјРµРЅРёР»РёСЃСЊ

**Pull-to-refresh:**

- [ ] РЎРІР°Р№Рї РІРЅРёР· РѕР±РЅРѕРІР»СЏРµС‚ Р’РЎР• РґР°РЅРЅС‹Рµ РѕРґРЅРѕРІСЂРµРјРµРЅРЅРѕ
- [ ] РќРµС‚ РїРѕСЃР»РµРґРѕРІР°С‚РµР»СЊРЅРѕРіРѕ РѕР±РЅРѕРІР»РµРЅРёСЏ РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№ Рё РѕС‚РґРµР»РѕРІ
- [ ] Loadings indicator РїРѕРєР°Р·С‹РІР°РµС‚СЃСЏ РїСЂР°РІРёР»СЊРЅРѕ

**Realtime СЃРёРЅС…СЂРѕРЅРёР·Р°С†РёСЏ:**

- [ ] РР·РјРµРЅРёС‚СЊ РѕС‚РґРµР» РІ Р‘Р” РЅР°РїСЂСЏРјСѓСЋ
- [ ] РћР±РЅРѕРІР»РµРЅРёРµ РѕС‚СЂР°Р¶Р°РµС‚СЃСЏ РІ РїСЂРёР»РѕР¶РµРЅРёРё С‡РµСЂРµР· Realtime
- [ ] РћР±Р° С…СѓРєР° РѕР±РЅРѕРІР»СЏСЋС‚СЃСЏ СЃРёРЅС…СЂРѕРЅРёР·РёСЂРѕРІР°РЅРѕ

**РЎР±СЂРѕСЃ С„РёР»СЊС‚СЂРѕРІ:**

- [ ] РџСЂРё СЃР±СЂРѕСЃРµ С„РёР»СЊС‚СЂРѕРІ РїРµСЂРµСЃС‡РёС‚С‹РІР°РµС‚СЃСЏ queryKey
- [ ] РџРѕР»СЊР·РѕРІР°С‚РµР»Рё РїРµСЂРµР·Р°РіСЂСѓР¶Р°СЋС‚СЃСЏ
- [ ] РћС‚РґРµР»С‹ РѕСЃС‚Р°СЋС‚СЃСЏ РІ РєСЌС€Рµ (РЅРµ РїРµСЂРµР·Р°РіСЂСѓР¶Р°СЋС‚СЃСЏ)

### рџ“Љ РњРµС‚СЂРёРєРё РїСЂРѕРёР·РІРѕРґРёС‚РµР»СЊРЅРѕСЃС‚Рё

**РњРѕР¶РЅРѕ РїСЂРѕРІРµСЂРёС‚СЊ РІ DevTools:**

```javascript
// Р’ Р±СЂР°СѓР·РµСЂРЅРѕР№ РєРѕРЅСЃРѕР»Рё (РµСЃР»Рё РµСЃС‚СЊ debug Р»РѕРіРёСЂРѕРІР°РЅРёРµ):
// 1. РџСЂРѕРІРµСЂРёС‚СЊ СЂР°Р·РјРµСЂ РєСЌС€Р°
console.log(globalCache.size()); // РґРѕР»Р¶РµРЅ Р±С‹С‚СЊ < 5 СЌР»РµРјРµРЅС‚РѕРІ

// 2. РџСЂРѕРІРµСЂРёС‚СЊ СЃС‚Р°С‚РёСЃС‚РёРєСѓ РєСЌС€Р°
console.log(globalCache.getStats());
// {total: 2, fresh: 2, stale: 0}

// 3. РџСЂРѕРІРµСЂРёС‚СЊ Network tab
// - РџРµСЂРІС‹Р№ РІРёР·РёС‚: 2 Р·Р°РїСЂРѕСЃР° (users + departments)
// - РџРѕРІС‚РѕСЂРЅС‹Р№ РІРёР·РёС‚: 0 Р·Р°РїСЂРѕСЃРѕРІ (РІСЃРµ РёР· РєСЌС€Р°)
```

### рџ”Ќ РџСЂРѕРІРµСЂРєР° Р»РѕРіРёРєРё

РњРѕР¶РЅРѕ РґРѕР±Р°РІРёС‚СЊ РІСЂРµРјРµРЅРЅС‹Р№ console.log РґР»СЏ РїСЂРѕРІРµСЂРєРё:

```javascript
// Р’ useParallelDataLoad, РїРѕСЃР»Рµ РёРЅРёС†РёР°Р»РёР·Р°С†РёРё:
console.log('ParallelDataLoad РёРЅРёС†РёРёСЂРѕРІР°РЅ:', {
  users: hooksResults.users?.data?.length,
  departments: hooksResults.departments?.data?.length,
  isLoading,
  isRefreshing,
});
```

### рџљЂ РџСЂРёРјРµРЅРµРЅРёРµ РЅР° РґСЂСѓРіРёС… СЃС‚СЂР°РЅРёС†Р°С…

Р РµС€РµРЅРёРµ РіРѕС‚РѕРІРѕ Рє РїСЂРёРјРµРЅРµРЅРёСЋ РЅР° Р»СЋР±С‹С… РґСЂСѓРіРёС… СЃС‚СЂР°РЅРёС†Р°С…:

```javascript
// РџСЂРёРјРµСЂ РґР»СЏ СЃС‚СЂР°РЅРёС†С‹ Orders СЃ Customers:
const { orders, customers, isLoading, refreshAll } = useParallelDataLoad({
  orders: { hook: useOrders, options: { filters } },
  customers: { hook: useCustomers, options: { companyId } },
});
```

### рџ“љ Р”РѕРєСѓРјРµРЅС‚Р°С†РёСЏ РґР»СЏ РєРѕРјР°РЅРґС‹

**Р РµРєРѕРјРµРЅРґСѓРµС‚СЃСЏ РїСЂРѕС‡РёС‚Р°С‚СЊ:**

1. `SOLUTION_SUMMARY.md` вЂ” РћР±Р·РѕСЂ СЂРµС€РµРЅРёСЏ
2. `PARALLEL_LOADING_SOLUTION.md` вЂ” РџРѕРґСЂРѕР±РЅРѕРµ РѕРїРёСЃР°РЅРёРµ
3. `ARCHITECTURE_DIAGRAM.md` вЂ” РђСЂС…РёС‚РµРєС‚СѓСЂРЅС‹Рµ РґРёР°РіСЂР°РјРјС‹
4. `QUICK_REFERENCE_PARALLEL_LOADING.md` вЂ” Р‘С‹СЃС‚СЂР°СЏ СЃРїСЂР°РІРєР°

### вљ™пёЏ РљРѕРЅС„РёРіСѓСЂР°С†РёСЏ (РїСЂРё РЅРµРѕР±С…РѕРґРёРјРѕСЃС‚Рё РёР·РјРµРЅРёС‚СЊ)

**РљРµС€РёСЂРѕРІР°РЅРёРµ РѕС‚РґРµР»РѕРІ** (`components/hooks/useDepartments.js`):

- РР·РјРµРЅРёС‚СЊ `ttl: 60 * 60 * 1000` РЅР° РЅСѓР¶РЅРѕРµ Р·РЅР°С‡РµРЅРёРµ
- РР·РјРµРЅРёС‚СЊ `staleTime: 30 * 60 * 1000` РЅР° РЅСѓР¶РЅРѕРµ Р·РЅР°С‡РµРЅРёРµ

**РљРµС€РёСЂРѕРІР°РЅРёРµ РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№** (`components/hooks/useUsers.js`):

- TTL: 5 РјРёРЅСѓС‚ (РјРѕР¶РЅРѕ РёР·РјРµРЅРёС‚СЊ РµСЃР»Рё РЅСѓР¶РЅРѕ)
- staleTime: 2 РјРёРЅСѓС‚С‹ (РјРѕР¶РЅРѕ РёР·РјРµРЅРёС‚СЊ РµСЃР»Рё РЅСѓР¶РЅРѕ)

### рџђ› РћС‚Р»Р°РґРєР° РїСЂРѕР±Р»РµРј

**Р•СЃР»Рё РѕС‚РґРµР»С‹ РІСЃРµ РµС‰Рµ РјРµСЂС†Р°СЋС‚:**

1. РџСЂРѕРІРµСЂРёС‚СЊ Network tab вЂ” РґРѕР»Р¶РЅС‹ Р±С‹С‚СЊ РёР· РєСЌС€Р°
2. РџСЂРѕРІРµСЂРёС‚СЊ С‡С‚Рѕ TTL СѓСЃС‚Р°РЅРѕРІР»РµРЅ РЅР° 60 РјРёРЅСѓС‚
3. РџСЂРѕРІРµСЂРёС‚СЊ С‡С‚Рѕ РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ `useParallelDataLoad`

**Р•СЃР»Рё UI РЅРµ РѕР±РЅРѕРІР»СЏРµС‚СЃСЏ РїРѕСЃР»Рµ Realtime:**

1. РџСЂРѕРІРµСЂРёС‚СЊ С‡С‚Рѕ `useRealtimeSync` РІРєР»СЋС‡РµРЅ
2. РџСЂРѕРІРµСЂРёС‚СЊ Network tab РЅР° Realtime СЃРѕР±С‹С‚РёСЏ
3. РџСЂРѕРІРµСЂРёС‚СЊ С‡С‚Рѕ queryKey РѕСЃС‚Р°РµС‚СЃСЏ РѕРґРёРЅР°РєРѕРІС‹Р№

**Р•СЃР»Рё РїСЂРѕРёР·РІРѕРґРёС‚РµР»СЊРЅРѕСЃС‚СЊ РЅРµ СѓР»СѓС‡С€РёР»Р°СЃСЊ:**

1. РџСЂРѕРІРµСЂРёС‚СЊ С‡С‚Рѕ С…РѕР»РѕРґРЅС‹Р№ СЃС‚Р°СЂС‚ Р±С‹Р» (РѕС‡РёСЃС‚РёС‚СЊ РєСЌС€)
2. РџСЂРѕРІРµСЂРёС‚СЊ Network tab РЅР° СЂР°Р·РјРµСЂ Р·Р°РїСЂРѕСЃРѕРІ
3. РџСЂРѕРІРµСЂРёС‚СЊ С‡С‚Рѕ РєСЌС€ РґРµР№СЃС‚РІРёС‚РµР»СЊРЅРѕ РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ

### рџ“ћ РљРѕРЅС‚Р°РєС‚ РґР»СЏ РІРѕРїСЂРѕСЃРѕРІ

Р•СЃР»Рё РІРѕР·РЅРёРєР»Рё РІРѕРїСЂРѕСЃС‹ РїРѕ СЂРµР°Р»РёР·Р°С†РёРё:

- РџСЂРѕРІРµСЂРёС‚СЊ РґРѕРєСѓРјРµРЅС‚Р°С†РёСЋ РІ `/PARALLEL_LOADING_SOLUTION.md`
- РџСЂРѕРІРµСЂРёС‚СЊ Р°СЂС…РёС‚РµРєС‚СѓСЂСѓ РІ `/ARCHITECTURE_DIAGRAM.md`
- РџРѕРёСЃРєР°С‚СЊ РїСЂРёРјРµСЂ РІ `/QUICK_REFERENCE_PARALLEL_LOADING.md`

---

## рџЋ‰ Р“РѕС‚РѕРІРѕ Рє РёСЃРїРѕР»СЊР·РѕРІР°РЅРёСЋ!

Р РµС€РµРЅРёРµ РїРѕР»РЅРѕСЃС‚СЊСЋ РёРЅС‚РµРіСЂРёСЂРѕРІР°РЅРѕ Рё РіРѕС‚РѕРІРѕ Рє РїСЂРѕРґР°РєС€РµРЅСѓ.

**РћСЃРЅРѕРІРЅС‹Рµ РїСЂРµРёРјСѓС‰РµСЃС‚РІР°:**

- вљЎ РџР°СЂР°Р»Р»РµР»СЊРЅР°СЏ Р·Р°РіСЂСѓР·РєР° (30% Р±С‹СЃС‚СЂРµРµ)
- рџ’ѕ Р Р°СЃС€РёСЂРµРЅРЅРѕРµ РєРµС€РёСЂРѕРІР°РЅРёРµ (60x РјРµРЅСЊС€Рµ Р·Р°РїСЂРѕСЃРѕРІ)
- рџЋЁ Р‘РµР· РІРёР·СѓР°Р»СЊРЅРѕРіРѕ РјРµСЂС†Р°РЅРёСЏ
- рџ”„ Realtime СЃРёРЅС…СЂРѕРЅРёР·Р°С†РёСЏ
- рџ“± РњР°СЃС€С‚Р°Р±РёСЂСѓРµРјРѕ РґР»СЏ РґСЂСѓРіРёС… СЃС‚СЂР°РЅРёС†
