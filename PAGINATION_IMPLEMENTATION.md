# üì± –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π ‚Äî –∫–∞–∫ –≤ —Ç–æ–ø–æ–≤—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è (–∫–∞–∫ –≤ Instagram/Telegram/Twitter)

#### 1. **–ü–µ—Ä–≤—ã–µ 10 –∑–∞—è–≤–æ–∫ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ** (–∏–∑ prefetch –∫—ç—à–∞)

- –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–ú–æ–∏ –∑–∞–∫–∞–∑—ã" ‚Äî –¥–∞–Ω–Ω—ã–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –°–†–ê–ó–£
- –ü–µ—Ä–≤—ã–µ 10 –∑–∞–∫–∞–∑–æ–≤ —É–∂–µ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ —Ñ–æ–Ω–µ (—á–µ—Ä–µ–∑ `lib/prefetch.js`)
- **–ù–∏–∫–∞–∫–æ–≥–æ loader'–∞!** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ

#### 2. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ** (infinite scroll)

- –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ—Å–∫—Ä–æ–ª–ª–∏–≤–∞–µ—Ç –¥–æ –∫–æ–Ω—Ü–∞ ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∞—è –ø–æ—Ä—Ü–∏—è (10 –∑–∞–∫–∞–∑–æ–≤)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–∞–ª–µ–Ω—å–∫–∏–π —Å–ø–∏–Ω–Ω–µ—Ä –≤–Ω–∏–∑—É —Å–ø–∏—Å–∫–∞
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ ‚Äî —ç–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ –ø–∞–º—è—Ç–∏

#### 3. **–£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏**

```javascript
const PAGE_SIZE = 10; // –†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–π –ø–æ—Ä—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
const [page, setPage] = useState(1);
const [hasMore, setHasMore] = useState(true);
const [loadingMore, setLoadingMore] = useState(false);
```

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (10 –∑–∞–∫–∞–∑–æ–≤):

```javascript
// –ò—Å–ø–æ–ª—å–∑—É–µ–º Supabase .range() –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
const { data } = await query.order('datetime', { ascending: false }).range(0, 9); // –ü–µ—Ä–≤—ã–µ 10 –∑–∞–∫–∞–∑–æ–≤ (–∏–Ω–¥–µ–∫—Å—ã 0-9)

setOrders(data);
setHasMore(data.length === PAGE_SIZE); // –ï—Å—Ç—å –ª–∏ –µ—â—ë –¥–∞–Ω–Ω—ã–µ?
```

### –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ:

```javascript
const loadMore = useCallback(async () => {
  if (loadingMore || !hasMore || loading) return; // –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

  setLoadingMore(true);
  const nextPage = page + 1;

  const from = (nextPage - 1) * PAGE_SIZE; // 10, 20, 30...
  const to = from + PAGE_SIZE - 1; // 19, 29, 39...

  const { data } = await query.order('datetime', { ascending: false }).range(from, to); // –°–ª–µ–¥—É—é—â–∏–µ 10 –∑–∞–∫–∞–∑–æ–≤

  setOrders((prev) => [...prev, ...data]); // –î–æ–±–∞–≤–ª—è–µ–º –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º!
  setHasMore(data.length === PAGE_SIZE);
  setLoadingMore(false);
}, [page, hasMore, loading]);
```

### FlatList —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π:

```jsx
<FlatList
  data={filteredOrders}
  renderItem={renderItem}
  keyExtractor={keyExtractor}
  onEndReached={loadMore} // üî• –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∫–æ–Ω—Ü–∞ —Å–ø–∏—Å–∫–∞!
  onEndReachedThreshold={0.5} // –ó–∞–≥—Ä—É–∂–∞—Ç—å –∑–∞ 50% –¥–æ –∫–æ–Ω—Ü–∞
  ListFooterComponent={renderFooter} // –°–ø–∏–Ω–Ω–µ—Ä –≤–Ω–∏–∑—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  refreshControl={<RefreshControl />} // Pull-to-refresh
/>
```

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ (–ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å–æ —Å—Ç–∞—Ä—ã–º –ø–æ–¥—Ö–æ–¥–æ–º):

### ‚ùå –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ (ScrollView + .map()):

```javascript
// –ó–∞–≥—Ä—É–∂–∞–ª–∏ –í–°–ï –∑–∞–∫–∞–∑—ã —Å—Ä–∞–∑—É:
const { data } = await query.order('datetime', { ascending: false });
// –ï—Å–ª–∏ 1000 –∑–∞–∫–∞–∑–æ–≤ ‚Äî —Ä–µ–Ω–¥–µ—Ä–∏–ª–∏ –í–°–ï 1000 –∫–∞—Ä—Ç–æ—á–µ–∫ —Å—Ä–∞–∑—É!

{
  orders.map((order) => <OrderCard order={order} />);
}
// –¢–æ—Ä–º–æ–∑–∏–ª —Å–∫—Ä–æ–ª–ª, –¥–æ–ª–≥–∞—è –∑–∞–≥—Ä—É–∑–∫–∞, –±–æ–ª—å—à–æ–π —Ç—Ä–∞—Ñ–∏–∫
```

### ‚úÖ –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ (FlatList + –ø–∞–≥–∏–Ω–∞—Ü–∏—è):

```javascript
// –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 10:
const { data } = await query.range(0, 9);

// –ü—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ –ø–æ–¥–≥—Ä—É–∂–∞–µ–º –ø–æ 10:
onEndReached={() => loadMore()}

// FlatList —Å–∞–º –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç ‚Äî —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã!
```

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Ç–æ–ø–æ–≤—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏:

| –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ          | –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞           | –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞     | –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è              |
| ------------------- | ------------------------- | -------------------- | -------------------------- |
| **Instagram**       | ~10-20 –ø–æ—Å—Ç–æ–≤             | ‚úÖ –ü—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ       | ‚úÖ –†–µ–Ω–¥–µ—Ä–∏—Ç —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ |
| **Telegram**        | ~20-30 —á–∞—Ç–æ–≤              | ‚úÖ –ü—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ       | ‚úÖ RecyclerView            |
| **Twitter**         | ~10-15 —Ç–≤–∏—Ç–æ–≤             | ‚úÖ –ü—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ       | ‚úÖ –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è           |
| **–ù–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** | 10 –∑–∞–∫–∞–∑–æ–≤ (–∏–∑ prefetch!) | ‚úÖ –ü–æ 10 –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ | ‚úÖ FlatList                |

---

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ:

### `app/orders/my-orders.js`:

1. ‚úÖ –ó–∞–º–µ–Ω—ë–Ω `ScrollView` –Ω–∞ `FlatList`
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏—è (10 –∑–∞–∫–∞–∑–æ–≤ –∑–∞ —Ä–∞–∑)
3. ‚úÖ –§—É–Ω–∫—Ü–∏—è `loadMore()` –¥–ª—è –ø–æ–¥–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
4. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ `renderItem`, `keyExtractor`, `ListFooterComponent`
5. ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ prefetch –∫—ç—à–∞

### `app/orders/all-orders.jsx`:

1. ‚úÖ –ó–∞–º–µ–Ω—ë–Ω `ScrollView` –Ω–∞ `FlatList`
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏—è (10 –∑–∞–∫–∞–∑–æ–≤ –∑–∞ —Ä–∞–∑)
3. ‚úÖ –§—É–Ω–∫—Ü–∏—è `loadMore()` –¥–ª—è –ø–æ–¥–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
4. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
5. ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

---

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É:

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ "–ú–æ–∏ –∑–∞–∫–∞–∑—ã":

```
‚úì –î–∞–Ω–Ω—ã–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ú–ì–ù–û–í–ï–ù–ù–û (–∏–∑ prefetch)
‚úì –í –∫–æ–Ω—Å–æ–ª–∏: [MyOrders] üöÄ Found 10 orders in prefetch cache!
```

### 2. –°–∫—Ä–æ–ª—å—Ç–µ –≤–Ω–∏–∑:

```
‚úì –ü–æ—è–≤–∏—Ç—Å—è —Å–ø–∏–Ω–Ω–µ—Ä –≤–Ω–∏–∑—É —Å–ø–∏—Å–∫–∞
‚úì –í –∫–æ–Ω—Å–æ–ª–∏: [MyOrders] üìÑ Loading page 2...
‚úì –ü–æ–¥–≥—Ä—É–∑–∏—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ 10 –∑–∞–∫–∞–∑–æ–≤
‚úì –í –∫–æ–Ω—Å–æ–ª–∏: [MyOrders] ‚úì Loaded 10 more orders
```

### 3. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Å–∫—Ä–æ–ª–ª–∏—Ç—å:

```
‚úì –ö–∞–∂–¥—ã–π —Ä–∞–∑ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ 10 –∑–∞–∫–∞–∑–æ–≤
‚úì –ö–æ–≥–¥–∞ –∑–∞–∫–∞–∑—ã –∑–∞–∫–æ–Ω—á–∞—Ç—Å—è ‚Äî —Å–ø–∏–Ω–Ω–µ—Ä –∏—Å—á–µ–∑–Ω–µ—Ç
‚úì –í –∫–æ–Ω—Å–æ–ª–∏: [MyOrders] ‚úì Loaded 3 more orders (–ø–æ—Å–ª–µ–¥–Ω–∏–µ)
```

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

```javascript
const PAGE_SIZE = 10; // –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
```

- **10 —ç–ª–µ–º–µ–Ω—Ç–æ–≤** ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
- –ù–µ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ (–±—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
- –ù–µ —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ (–º–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤)

### –ü–æ—Ä–æ–≥ –∑–∞–≥—Ä—É–∑–∫–∏:

```javascript
onEndReachedThreshold={0.5} // 50% –¥–æ –∫–æ–Ω—Ü–∞
```

- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞ **–ø–æ–ª–æ–≤–∏–Ω—É —ç–∫—Ä–∞–Ω–∞** –¥–æ –∫–æ–Ω—Ü–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç "–ø—É—Å—Ç–æ—Ç—ã" ‚Äî –¥–∞–Ω–Ω—ã–µ —É–∂–µ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è

### –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏:

```javascript
if (loadingMore || !hasMore || loading) return;
```

- `loadingMore` ‚Äî —É–∂–µ –∏–¥—ë—Ç –∑–∞–≥—Ä—É–∑–∫–∞
- `!hasMore` ‚Äî –¥–∞–Ω–Ω—ã–µ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å
- `loading` ‚Äî –∏–¥—ë—Ç –Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

---

## Pull-to-refresh:

–†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω–æ:

```javascript
const onRefresh = async () => {
  setPage(1); // –°–±—Ä–æ—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
  setHasMore(true);

  // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–≤—ã–µ 10 –∑–∞–Ω–æ–≤–æ
  const { data } = await query.range(0, 9);
  setOrders(data);
};
```

---

## –ò—Ç–æ–≥:

| –ú–µ—Ç—Ä–∏–∫–∞             | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏         | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏       |
| ------------------- | ---------------------- | ----------------------- |
| **–ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** | 500ms-2s (–≤—Å–µ –∑–∞–∫–∞–∑—ã)  | –ú–ì–ù–û–í–ï–ù–ù–û (prefetch)    |
| **–°–∫—Ä–æ–ª–ª**          | –õ–∞–≥–∞–µ—Ç (1000 –∫–∞—Ä—Ç–æ—á–µ–∫) | –ü–ª–∞–≤–Ω—ã–π (10-20 –≤–∏–¥–∏–º—ã—Ö) |
| **–¢—Ä–∞—Ñ–∏–∫**          | 500KB (–≤—Å–µ —Å—Ä–∞–∑—É)      | 50KB ‚Üí 50KB ‚Üí 50KB      |
| **–ü–∞–º—è—Ç—å**          | ~100MB (–≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏)  | ~10MB (—Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ)  |

üéâ **–¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ Instagram, Telegram –∏ –¥—Ä—É–≥–∏–µ —Ç–æ–ø–æ–≤—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è!**
