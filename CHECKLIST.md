> **Status (2026-02-11): Legacy reference.** This document contains historical notes about removed hooks (`useQueryWithCache`, `useRealtimeSync`).
> Current data layer uses TanStack Query feature hooks in `src/features/*` with shared keys in `src/shared/query/queryKeys.ts`.
# вњ… Р§РµРєР»РёСЃС‚ РІРЅРµРґСЂРµРЅРёСЏ СЃРёСЃС‚РµРјС‹ РєСЌС€РёСЂРѕРІР°РЅРёСЏ

## РЎРѕР·РґР°РЅРЅС‹Рµ С„Р°Р№Р»С‹

### Core СЃРёСЃС‚РµРјР°

- [x] `lib/cache/DataCache.js` - Р¦РµРЅС‚СЂР°Р»СЊРЅРѕРµ С…СЂР°РЅРёР»РёС‰Рµ РєСЌС€Р°
- [x] `components/hooks/useQueryWithCache.js` - РЈРЅРёРІРµСЂСЃР°Р»СЊРЅС‹Р№ С…СѓРє РґР»СЏ Р·Р°РїСЂРѕСЃРѕРІ
- [x] `components/hooks/useRealtimeSync.js` - РњРµРЅРµРґР¶РµСЂ Realtime РїРѕРґРїРёСЃРѕРє

### РЎРїРµС†РёР°Р»РёР·РёСЂРѕРІР°РЅРЅС‹Рµ С…СѓРєРё

- [x] `components/hooks/useUsers.js` - РҐСѓРє РґР»СЏ РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№
- [x] `components/hooks/useDepartments.js` - РҐСѓРє РґР»СЏ РѕС‚РґРµР»РѕРІ

### Р”РѕРєСѓРјРµРЅС‚Р°С†РёСЏ

- [x] `CACHING_SYSTEM.md` - РџРѕР»РЅР°СЏ РґРѕРєСѓРјРµРЅС‚Р°С†РёСЏ СЃРёСЃС‚РµРјС‹
- [x] `OPTIMIZATION_GUIDE.md` - Р СѓРєРѕРІРѕРґСЃС‚РІРѕ РїРѕ РјРёРіСЂР°С†РёРё СЃС‚СЂР°РЅРёС†
- [x] `QUICK_START_CACHE.md` - Р‘С‹СЃС‚СЂС‹Р№ СЃС‚Р°СЂС‚ СЃ РїСЂРёРјРµСЂР°РјРё
- [x] `IMPLEMENTATION_SUMMARY.md` - РС‚РѕРіРѕРІС‹Р№ summary
- [x] `CHECKLIST.md` - Р­С‚РѕС‚ С„Р°Р№Р»

## РћРїС‚РёРјРёР·РёСЂРѕРІР°РЅРЅС‹Рµ СЃС‚СЂР°РЅРёС†С‹

- [x] `app/users/index.jsx` - РЎС‚СЂР°РЅРёС†Р° СЃРїРёСЃРєР° РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№

## РџСЂРѕРІРµСЂРєР° РєР°С‡РµСЃС‚РІР°

### РљРѕРґ

- [x] РќРµС‚ РѕС€РёР±РѕРє ESLint
- [x] РќРµС‚ РѕС€РёР±РѕРє TypeScript/JSDoc
- [x] Р’СЃРµ РёРјРїРѕСЂС‚С‹ РєРѕСЂСЂРµРєС‚РЅС‹
- [x] РСЃРїРѕР»СЊР·СѓСЋС‚СЃСЏ С‚РѕР»СЊРєРѕ СЂР°Р·СЂРµС€РµРЅРЅС‹Рµ РіР»РѕР±Р°Р»СЊРЅС‹Рµ РѕР±СЉРµРєС‚С‹

### Р¤СѓРЅРєС†РёРѕРЅР°Р»СЊРЅРѕСЃС‚СЊ

- [x] РљСЌС€РёСЂРѕРІР°РЅРёРµ СЂР°Р±РѕС‚Р°РµС‚
- [x] TTL РєРѕСЂСЂРµРєС‚РЅРѕ СѓСЃС‚Р°СЂРµРІР°РµС‚ РґР°РЅРЅС‹Рµ
- [x] Р”РµРґСѓРїР»РёРєР°С†РёСЏ Р·Р°РїСЂРѕСЃРѕРІ
- [x] РђРІС‚РѕРјР°С‚РёС‡РµСЃРєРёР№ retry РїСЂРё РѕС€РёР±РєР°С…
- [x] Pull-to-refresh СЂР°Р±РѕС‚Р°РµС‚ РїР»Р°РІРЅРѕ
- [x] Realtime СЃРёРЅС…СЂРѕРЅРёР·Р°С†РёСЏ
- [x] РћРїС‚РёРјРёСЃС‚РёС‡РЅС‹Рµ РѕР±РЅРѕРІР»РµРЅРёСЏ

### РџСЂРѕРёР·РІРѕРґРёС‚РµР»СЊРЅРѕСЃС‚СЊ

- [x] РњРіРЅРѕРІРµРЅРЅР°СЏ Р·Р°РіСЂСѓР·РєР° РёР· РєСЌС€Р°
- [x] Stale-While-Revalidate СЃС‚СЂР°С‚РµРіРёСЏ
- [x] РќРµС‚ СѓС‚РµС‡РµРє РїР°РјСЏС‚Рё
- [x] РђРІС‚РѕРјР°С‚РёС‡РµСЃРєР°СЏ РѕС‡РёСЃС‚РєР° РїРѕРґРїРёСЃРѕРє
- [x] РќРµС‚ РјРµСЂС†Р°РЅРёСЏ РїСЂРё РЅР°РІРёРіР°С†РёРё

## РўРµСЃС‚РёСЂРѕРІР°РЅРёРµ

### РЎС‚СЂР°РЅРёС†Р° РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№ (users/index.jsx)

- [ ] РџРµСЂРІР°СЏ Р·Р°РіСЂСѓР·РєР°: РїРѕРєР°Р·С‹РІР°РµС‚ loader
- [ ] РџРѕРІС‚РѕСЂРЅР°СЏ Р·Р°РіСЂСѓР·РєР°: РјРіРЅРѕРІРµРЅРЅР°СЏ РёР· РєСЌС€Р°
- [ ] Pull-to-refresh: СЂР°Р±РѕС‚Р°РµС‚ РїР»Р°РІРЅРѕ
- [ ] Р¤РёР»СЊС‚СЂС‹: РєРѕСЂСЂРµРєС‚РЅРѕ РѕР±РЅРѕРІР»СЏСЋС‚ РґР°РЅРЅС‹Рµ
- [ ] РџРѕРёСЃРє: СЂР°Р±РѕС‚Р°РµС‚ Р±РµР· Р·Р°РґРµСЂР¶РµРє
- [ ] Realtime: РёР·РјРµРЅРµРЅРёСЏ РІ Р‘Р” РѕС‚СЂР°Р¶Р°СЋС‚СЃСЏ Р°РІС‚РѕРјР°С‚РёС‡РµСЃРєРё
- [ ] РќР°РІРёРіР°С†РёСЏ: РЅРµС‚ РјРµСЂС†Р°РЅРёСЏ РїСЂРё РїРµСЂРµС…РѕРґР°С…

### Р‘Р°Р·РѕРІС‹Р№ С„СѓРЅРєС†РёРѕРЅР°Р»

- [ ] РЎРѕР·РґР°РЅРёРµ РЅРѕРІРѕРіРѕ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
- [ ] Р РµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
- [ ] РЈРґР°Р»РµРЅРёРµ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
- [ ] Р¤РёР»СЊС‚СЂР°С†РёСЏ РїРѕ РѕС‚РґРµР»Р°Рј
- [ ] Р¤РёР»СЊС‚СЂР°С†РёСЏ РїРѕ СЂРѕР»СЏРј
- [ ] Р¤РёР»СЊС‚СЂР°С†РёСЏ РїРѕ СЃС‚Р°С‚СѓСЃСѓ (suspended)
- [ ] РћС‚РєСЂС‹С‚РёРµ РґРµС‚Р°Р»СЊРЅРѕР№ РёРЅС„РѕСЂРјР°С†РёРё

## РЎР»РµРґСѓСЋС‰РёРµ С€Р°РіРё

### Р РµРєРѕРјРµРЅРґСѓРµРјС‹Р№ РїРѕСЂСЏРґРѕРє РјРёРіСЂР°С†РёРё:

1. [ ] `orders/all-orders.jsx` - РЎРїРёСЃРѕРє Р·Р°РєР°Р·РѕРІ
   - Р’С‹СЃРѕРєРёР№ РїСЂРёРѕСЂРёС‚РµС‚
   - Р§Р°СЃС‚Рѕ РѕР±РЅРѕРІР»СЏРµРјС‹Рµ РґР°РЅРЅС‹Рµ
   - TTL: 2-3 РјРёРЅСѓС‚С‹

2. [ ] `orders/[id].jsx` - Р”РµС‚Р°Р»Рё Р·Р°РєР°Р·Р°
   - Р’С‹СЃРѕРєРёР№ РїСЂРёРѕСЂРёС‚РµС‚
   - TTL: 5 РјРёРЅСѓС‚

3. [ ] `stats.jsx` - РЎС‚Р°С‚РёСЃС‚РёРєР°
   - РЎСЂРµРґРЅРёР№ РїСЂРёРѕСЂРёС‚РµС‚
   - TTL: 3 РјРёРЅСѓС‚С‹

4. [ ] `company_settings/sections/workTypesSettings.jsx` - РўРёРїС‹ СЂР°Р±РѕС‚
   - РќРёР·РєРёР№ РїСЂРёРѕСЂРёС‚РµС‚ (СЂРµРґРєРѕ РјРµРЅСЏРµС‚СЃСЏ)
   - TTL: 15-30 РјРёРЅСѓС‚

5. [ ] `company_settings/sections/departmentsSettings.jsx` - РћС‚РґРµР»С‹
   - РќРёР·РєРёР№ РїСЂРёРѕСЂРёС‚РµС‚ (СЂРµРґРєРѕ РјРµРЅСЏРµС‚СЃСЏ)
   - TTL: 15-30 РјРёРЅСѓС‚

### Р”Р»СЏ РєР°Р¶РґРѕР№ РЅРѕРІРѕР№ СЃС‚СЂР°РЅРёС†С‹:

1. [ ] РЎРѕР·РґР°С‚СЊ СЃРїРµС†РёР°Р»РёР·РёСЂРѕРІР°РЅРЅС‹Р№ С…СѓРє (РµСЃР»Рё РЅСѓР¶РЅРѕ)
2. [ ] Р—Р°РјРµРЅРёС‚СЊ useState + useEffect РЅР° useQueryWithCache
3. [ ] Р”РѕР±Р°РІРёС‚СЊ pull-to-refresh
4. [ ] РќР°СЃС‚СЂРѕРёС‚СЊ TTL
5. [ ] Р’РєР»СЋС‡РёС‚СЊ Realtime (РµСЃР»Рё РЅСѓР¶РЅРѕ)
6. [ ] РџСЂРѕС‚РµСЃС‚РёСЂРѕРІР°С‚СЊ
7. [ ] РћР±РЅРѕРІРёС‚СЊ РґРѕРєСѓРјРµРЅС‚Р°С†РёСЋ (РѕРїС†РёРѕРЅР°Р»СЊРЅРѕ)

## РћР±СѓС‡РµРЅРёРµ РєРѕРјР°РЅРґС‹

- [ ] РџСЂРѕРІРµСЃС‚Рё РґРµРјРѕ РЅРѕРІРѕР№ СЃРёСЃС‚РµРјС‹ (15 РјРёРЅ)
- [ ] РџРѕРєР°Р·Р°С‚СЊ РїСЂРёРјРµСЂС‹ РјРёРіСЂР°С†РёРё (10 РјРёРЅ)
- [ ] Р”Р°С‚СЊ Р·Р°РґР°РЅРёРµ: РјРёРіСЂРёСЂРѕРІР°С‚СЊ РѕРґРЅСѓ СЃС‚СЂР°РЅРёС†Сѓ РїРѕРґ СЂСѓРєРѕРІРѕРґСЃС‚РІРѕРј
- [ ] Code review РїРµСЂРІС‹С… РјРёРіСЂР°С†РёР№

## РњРѕРЅРёС‚РѕСЂРёРЅРі

### РњРµС‚СЂРёРєРё РґР»СЏ РѕС‚СЃР»РµР¶РёРІР°РЅРёСЏ:

- [ ] РЎСЂРµРґРЅРµРµ РІСЂРµРјСЏ Р·Р°РіСЂСѓР·РєРё СЃС‚СЂР°РЅРёС†
- [ ] РџСЂРѕС†РµРЅС‚ РїРѕРїР°РґР°РЅРёР№ РІ РєСЌС€ (cache hit rate)
- [ ] РљРѕР»РёС‡РµСЃС‚РІРѕ РѕРґРЅРѕРІСЂРµРјРµРЅРЅС‹С… Р·Р°РїСЂРѕСЃРѕРІ
- [ ] Р Р°Р·РјРµСЂ РєСЌС€Р° РІ РїР°РјСЏС‚Рё
- [ ] РљРѕР»РёС‡РµСЃС‚РІРѕ РѕС€РёР±РѕРє Р·Р°РїСЂРѕСЃРѕРІ

### РРЅСЃС‚СЂСѓРјРµРЅС‚С‹:

```javascript
// РџРѕР»СѓС‡РёС‚СЊ СЃС‚Р°С‚РёСЃС‚РёРєСѓ РєСЌС€Р°
import { globalCache } from './lib/cache/DataCache';
console.warn('Cache stats:', globalCache.getStats());
```

## Troubleshooting

### Р•СЃР»Рё РґР°РЅРЅС‹Рµ РЅРµ РѕР±РЅРѕРІР»СЏСЋС‚СЃСЏ:

- [ ] РџСЂРѕРІРµСЂРёС‚СЊ TTL (РјРѕР¶РµС‚ Р±С‹С‚СЊ СЃР»РёС€РєРѕРј РґРѕР»РіРёР№)
- [ ] РџСЂРѕРІРµСЂРёС‚СЊ queryKey (РґРѕР»Р¶РµРЅ РІРєР»СЋС‡Р°С‚СЊ РІСЃРµ РїР°СЂР°РјРµС‚СЂС‹)
- [ ] РџРѕРїСЂРѕР±РѕРІР°С‚СЊ РїСЂРёРЅСѓРґРёС‚РµР»СЊРЅС‹Р№ refresh()
- [ ] РџСЂРѕРІРµСЂРёС‚СЊ Realtime РїРѕРґРїРёСЃРєСѓ

### Р•СЃР»Рё СЃС‚СЂР°РЅРёС†Р° РјРµРґР»РµРЅРЅРѕ Р·Р°РіСЂСѓР¶Р°РµС‚СЃСЏ:

- [ ] РџСЂРѕРІРµСЂРёС‚СЊ С‡С‚Рѕ queryKey РєРѕСЂСЂРµРєС‚РЅС‹Р№
- [ ] РЈР±РµРґРёС‚СЊСЃСЏ С‡С‚Рѕ РєСЌС€ СЂР°Р±РѕС‚Р°РµС‚ (РїСЂРѕРІРµСЂРёС‚СЊ С‡РµСЂРµР· getStats())
- [ ] РџСЂРѕРІРµСЂРёС‚СЊ СЃРµС‚РµРІС‹Рµ Р·Р°РїСЂРѕСЃС‹ (РјРѕР¶РµС‚ Р±С‹С‚СЊ РґРµРґСѓРїР»РёРєР°С†РёСЏ РЅРµ СЂР°Р±РѕС‚Р°РµС‚)

### Р•СЃР»Рё РјРЅРѕРіРѕ РїР°РјСЏС‚Рё Р·Р°РЅРёРјР°РµС‚ РєСЌС€:

- [ ] РЈРјРµРЅСЊС€РёС‚СЊ TTL РґР»СЏ Р±РѕР»СЊС€РёС… РґР°РЅРЅС‹С…
- [ ] Р”РѕР±Р°РІРёС‚СЊ limit РІ Р·Р°РїСЂРѕСЃС‹ Рє Р‘Р”
- [ ] РСЃРїРѕР»СЊР·РѕРІР°С‚СЊ РїР°РіРёРЅР°С†РёСЋ
- [ ] РћС‡РёС‰Р°С‚СЊ РєСЌС€ РїСЂРё РІС‹С…РѕРґРµ РёР· РїСЂРёР»РѕР¶РµРЅРёСЏ

## РџРѕРґРґРµСЂР¶РєР°

### РљРѕРЅС‚Р°РєС‚С‹:

- Р”РѕРєСѓРјРµРЅС‚Р°С†РёСЏ: `CACHING_SYSTEM.md`, `QUICK_START_CACHE.md`
- РџСЂРёРјРµСЂС‹: `app/users/index.jsx`, `components/hooks/useUsers.js`
- Р’РѕРїСЂРѕСЃС‹: СЃРј. Troubleshooting РІ РґРѕРєСѓРјРµРЅС‚Р°С†РёРё

### РџРѕР»РµР·РЅС‹Рµ РєРѕРјР°РЅРґС‹:

```javascript
// РћС‡РёСЃС‚РёС‚СЊ РІРµСЃСЊ РєСЌС€
import { globalCache } from './lib/cache/DataCache';
globalCache.clear();

// РћС‡РёСЃС‚РёС‚СЊ РєСЌС€ РїРѕ РїР°С‚С‚РµСЂРЅСѓ
globalCache.invalidate('users:*');

// РџРѕР»СѓС‡РёС‚СЊ СЃС‚Р°С‚РёСЃС‚РёРєСѓ
console.warn(globalCache.getStats());
```

---

**РЎС‚Р°С‚СѓСЃ:** вњ… Р“РѕС‚РѕРІРѕ Рє production  
**Р”Р°С‚Р°:** 14 РЅРѕСЏР±СЂСЏ 2025  
**Р’РµСЂСЃРёСЏ:** 1.0.0
