# –ß–µ–∫-–ª–∏—Å—Ç: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–º–µ–Ω–æ–π –ø–∞—Ä–æ–ª—è

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
- [x] –ù–∞–π–¥–µ–Ω —Ñ–∞–π–ª —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: `app/users/[id]/edit.jsx`
- [x] –ù–∞–π–¥–µ–Ω–∞ edge-—Ñ—É–Ω–∫—Ü–∏—è: `supabase/functions/update_user/index.ts`
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞: –Ω–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞—É–¥–∏—Ç–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–∞—Ä–æ–ª—è
- [x] –ù–∞–π–¥–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ: –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

### 2. Edge-—Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [x] –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `changed_by` –≤ —Ç–∏–ø `ReqBody`
- [x] –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
- [x] –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—Ö–∞/–æ—à–∏–±–∫–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- [x] –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü—É `password_change_log`
- [x] –§–∞–π–ª: `supabase/functions/update_user/index.ts`

### 3. –¢–∞–±–ª–∏—Ü–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∞
- [x] –§–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏: `supabase/migrations/20260211_password_change_log.sql`
- [x] SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è: `SETUP_PASSWORD_LOGS.sql`
- [x] –¢–∞–±–ª–∏—Ü–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç: user_id, changed_by, changed_at, ip_address, user_agent, notes
- [x] –í–∫–ª—é—á–µ–Ω RLS (Row Level Security)
- [x] –°–æ–∑–¥–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

### 4. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±–Ω–æ–≤–ª–µ–Ω
- [x] –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `app/users/[id]/edit.jsx`
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ `changed_by` –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
- [x] –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [x] –†–µ–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –±–æ–ª—å—à–µ –Ω–µ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∏—Ç —Ñ–æ—Ä–º–∞—Ç `[proceedSave]` –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

### 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- [x] –û—Ç—á–µ—Ç: `PASSWORD_CHANGE_FIX_REPORT.md`
- [x] –°–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è (Linux): `deploy-password-fix.sh`
- [x] –°–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è (Windows): `deploy-password-fix.bat`
- [x] –≠—Ç–æ—Ç —á–µ–∫-–ª–∏—Å—Ç: `PASSWORD_CHANGE_CHECKLIST.md`

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ VPS

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î
**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Supabase Dashboard (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
1. –û—Ç–∫—Ä—ã—Ç—å https://supabase.monitorapp.ru
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ SQL Editor
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `SETUP_PASSWORD_LOGS.sql`
4. –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
5. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞ (–¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –≤ Tables)

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ CLI (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)**
```bash
cd /path/to/field-work
supabase db push
```

### –®–∞–≥ 2: –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å edge-—Ñ—É–Ω–∫—Ü–∏—é
**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Supabase Dashboard (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
1. –û—Ç–∫—Ä—ã—Ç—å https://supabase.monitorapp.ru ‚Üí Edge Functions
2. –ù–∞–π—Ç–∏ `update_user`
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `supabase/functions/update_user/index.ts`
4. –í—Å—Ç–∞–≤–∏—Ç—å –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä –Ω–∞ –≤–µ–±-—Å–∞–π—Ç–µ
5. –ù–∞–∂–∞—Ç—å Deploy

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ CLI**
```bash
cd /path/to/field-work
supabase functions deploy update_user
```

### –®–∞–≥ 3: –ímerk–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ —Ñ–∞–π–ª–æ–≤:
- `app/users/[id]/edit.jsx`

–ï—Å–ª–∏ —ç—Ç–æ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
eas build --platform ios
eas build --platform android
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
1. –û—Ç–∫—Ä–æ–π—Ç–µ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–ª–∏ –≤–µ–±-–≤–µ—Ä—Å–∏—é
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
3. –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools ‚Üí Console (F12)
4. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å
5. –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
```
[proceedSave] Attempting to update auth credentials
[proceedSave] Calling update_user function at: https://supabase.monitorapp.ru/functions/v1/update_user
[proceedSave] Response status: 200
[proceedSave] Auth update response: {ok: true}
```

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Supabase
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://supabase.monitorapp.ru ‚Üí Edge Functions ‚Üí update_user ‚Üí Logs
2. –î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å –ª–æ–≥–∏ –≤–∏–¥–∞:
```
[UPDATE_USER] Updating auth for user <uuid>: { hasEmail: false, hasPassword: true }
[UPDATE_USER] Auth update successful for user <uuid>
[UPDATE_USER] Logging password change for user <uuid>
[UPDATE_USER] Password change logged successfully for user <uuid>
```

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard ‚Üí SQL Editor
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å:
```sql
SELECT * FROM public.password_change_log ORDER BY changed_at DESC LIMIT 10;
```
3. –î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å –∑–∞–ø–∏—Å–∏ –≤–∏–¥–∞:
```
id: <uuid>
user_id: <user-uuid>
changed_at: 2026-02-11 10:30:45.123456+00
changed_by: <admin-or-user-uuid>
```

### –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ curl (–¥–ª—è backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
```bash
curl -X POST https://supabase.monitorapp.ru/functions/v1/update_user \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "apikey: YOUR_ANON_KEY" \
  -d '{
    "user_id": "test-user-uuid",
    "changed_by": "test-admin-uuid",
    "password": "NewSecurePassword123"
  }'
```

–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
```json
{"ok": true}
```

## üêõ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –õ–æ–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏
**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—Ç–∫—Ä—ã–ª–∏ Developer Tools (F12)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫—É Console
- –û—á–∏—Å—Ç–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å (Ctrl+Shift+K) –¥–æ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ 404 –ø—Ä–∏ –≤—ã–∑–æ–≤–µ edge-—Ñ—É–Ω–∫—Ü–∏–∏
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞ –≤ Supabase Dashboard
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL: https://supabase.monitorapp.ru/functions/v1/update_user
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏ (ANON_KEY, SERVICE_ROLE_KEY)

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–∞–±–ª–∏—Ü–∞ password_change_log –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:**
- –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard ‚Üí SQL Editor
- –í—ã–ø–æ–ª–Ω–∏—Ç–µ: `SETUP_PASSWORD_LOGS.sql`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –≤ Tables

### –ü—Ä–æ–±–ª–µ–º–∞: RLS –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø–∏—Å—å
**–†–µ—à–µ–Ω–∏–µ:**
- –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ SERVICE_ROLE –∫–ª—é—á–æ–º
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ edge-—Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SERVICE_ROLE_KEY, –∞ –Ω–µ ANON_KEY
- –ü–æ–ª–∏—Ç–∏–∫–∏ RLS –¥–æ–ª–∂–Ω—ã —Ä–∞–∑—Ä–µ—à–∞—Ç—å INSERT —á–µ—Ä–µ–∑ service role

## üîç –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –ü–µ—Ä–µ–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º
- [ ] –ü—Ä–æ—á–∏—Ç–∞–ª `PASSWORD_CHANGE_FIX_REPORT.md`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª, —á—Ç–æ —É –º–µ–Ω—è –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ Supabase Dashboard
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–ª —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- [ ] –ü—Ä–∏–º–µ–Ω–∏–ª –º–∏–≥—Ä–∞—Ü–∏—é `SETUP_PASSWORD_LOGS.sql` –≤ SQL Editor
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `password_change_log` —Å–æ–∑–¥–∞–Ω–∞
- [ ] –í—Å—Ç–∞–≤–∏–ª –Ω–æ–≤—ã–π –∫–æ–¥ edge-—Ñ—É–Ω–∫—Ü–∏–∏ –≤ Supabase Dashboard
- [ ] –†–∞–∑–≤–µ—Ä–Ω—É–ª edge-—Ñ—É–Ω–∫—Ü–∏—é (–Ω–∞–∂–∞–ª Deploy)
- [ ] –†–∞–∑–≤–µ—Ä–Ω—É–ª –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ (–µ—Å–ª–∏ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –û—Ç–∫—É–¥–∞-—Ç–æ –∏–∑–º–µ–Ω –ø–∞—Ä–æ–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (Console)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –ª–æ–≥–∏ edge-—Ñ—É–Ω–∫—Ü–∏–∏ –≤ Supabase Dashboard
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `password_change_log` –≤ –ë–î
- [ ] –£–±–µ–¥–∏–ª—Å—è, —á—Ç–æ –ø–∞—Ä–æ–ª—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏–ª—Å—è (–ø—Ä–æ–±—É—é –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º)

### –ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- [ ] –î–∞–ª –æ—Ç–∑—ã–≤ –æ —Ç–æ–º, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –≤—Å–µ
- [ ] –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏, –æ–Ω–∏ –≤–∏–¥–Ω—ã –≤ –ª–æ–≥–∞—Ö
- [ ] –¢–∞–±–ª–∏—Ü–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è

## üìû –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–§–ª–∞–≥ –≤ –∫–æ–¥–µ** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `APP_FUNCTIONS.UPDATE_USER` = 'update_user' –≤ `lib/constants.js`

2. **EXPO_PUBLIC –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–µ—Ä–Ω—ã:
   ```
   EXPO_PUBLIC_SUPABASE_URL=https://supabase.monitorapp.ru
   EXPO_PUBLIC_SUPABASE_ANON_KEY=<correct-anon-key>
   ```

3. **–õ–æ–≥–∏ –≤ Supabase** - –≤—Å–µ –ª–æ–≥–∏ –∏–∑ edge-—Ñ—É–Ω–∫—Ü–∏–∏ –≤–∏–¥–Ω—ã –≤ Dashboard:
   ```
   https://supabase.monitorapp.ru ‚Üí Edge Functions ‚Üí update_user ‚Üí Logs
   ```

4. **RLS –ø–æ–ª–∏—Ç–∏–∫–∏** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª–∏—Ç–∏–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç INSERT:
   ```sql
   SELECT * FROM information_schema.role_table_grants 
   WHERE table_name = 'password_change_log';
   ```

## üìù –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤:

‚úÖ –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç –ø–∞—Ä–æ–ª—å:
1. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ª–æ–≥–∏—Ä—É–µ—Ç –ø–æ–ø—ã—Ç–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä –∫–æ–Ω—Å–æ–ª—å
2. Edge-—Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–∞—Ä–æ–ª—å –≤ auth.users
3. Edge-—Ñ—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ –≤ password_change_log —Ç–∞–±–ª–∏—Ü—É
4. –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –≤ –ë–î
5. –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∞—É–¥–∏—Ç–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏

‚úÖ –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ:
- –í–∏–¥–Ω—ã –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è (—É—Å–ø–µ—à–Ω—ã–µ –∏ –Ω–µ—É—Å–ø–µ—à–Ω—ã–µ)
- –ò–∑–≤–µ—Å—Ç–Ω–æ, –∫—Ç–æ –∏ –∫–æ–≥–¥–∞ –º–µ–Ω—è–ª –ø–∞—Ä–æ–ª—å
- –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –µ—Å—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
