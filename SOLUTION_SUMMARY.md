> **Status (2026-02-11): Legacy reference.** This document contains historical notes about removed hooks (`useQueryWithCache`, `useRealtimeSync`).
> Current data layer uses TanStack Query feature hooks in `src/features/*` with shared keys in `src/shared/query/queryKeys.ts`.
# рџљЂ РџР°СЂР°Р»Р»РµР»СЊРЅР°СЏ Р·Р°РіСЂСѓР·РєР° РґР°РЅРЅС‹С…: Р РµС€РµРЅРёРµ СЂРµР°Р»РёР·РѕРІР°РЅРѕ

## рџ“‹ Р РµР·СЋРјРµ

РЎРѕР·РґР°РЅРѕ **РїСЂРѕС„РµСЃСЃРёРѕРЅР°Р»СЊРЅРѕРµ СЂРµС€РµРЅРёРµ** РґР»СЏ РїР°СЂР°Р»Р»РµР»СЊРЅРѕР№ Р·Р°РіСЂСѓР·РєРё РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№ Рё РѕС‚РґРµР»РѕРІ Р±РµР· РјРµСЂС†Р°РЅРёСЏ Рё Р»РёС€РЅРёС… Р·Р°РїСЂРѕСЃРѕРІ Рє Р‘Р”.

### вњ… Р РµС€РµРЅР° РїСЂРѕР±Р»РµРјР°

- вќЊ **Р‘С‹Р»Рѕ:** РћС‚РґРµР»С‹ Р·Р°РіСЂСѓР¶Р°Р»РёСЃСЊ Р·Р°РЅРѕРІРѕ РїСЂРё РєР°Р¶РґРѕРј РІРёР·РёС‚Рµ в†’ РјРµСЂС†Р°РЅРёРµ
- вњ… **РЎС‚Р°Р»Рѕ:** РћС‚РґРµР»С‹ РєРµС€РёСЂСѓСЋС‚СЃСЏ РЅР° 60 РјРёРЅСѓС‚ в†’ Р·Р°РіСЂСѓР¶Р°СЋС‚СЃСЏ РјРіРЅРѕРІРµРЅРЅРѕ

---

## рџ“Ѓ Р¤Р°Р№Р»С‹ РєРѕС‚РѕСЂС‹Рµ Р±С‹Р»Рё РёР·РјРµРЅРµРЅС‹/СЃРѕР·РґР°РЅС‹

### 1. РќРѕРІС‹Р№ С…СѓРє: `components/hooks/useParallelDataLoad.js`

**РЎРѕР·РґР°РЅ РЅРѕРІС‹Р№ С„Р°Р№Р» СЃ РїСЂРѕС„РµСЃСЃРёРѕРЅР°Р»СЊРЅС‹Рј С…СѓРєРѕРј РґР»СЏ РїР°СЂР°Р»Р»РµР»СЊРЅРѕР№ Р·Р°РіСЂСѓР·РєРё**

```javascript
// РСЃРїРѕР»СЊР·РѕРІР°РЅРёРµ:
const { users, departments, isLoading, refreshAll } = useParallelDataLoad({
  users: { hook: useUsers, options: {...} },
  departments: { hook: useDepartments, options: {...} },
});
```

**Р’РѕР·РјРѕР¶РЅРѕСЃС‚Рё:**

- РРЅРёС†РёР°Р»РёР·РёСЂСѓРµС‚ Р’РЎР• С…СѓРєРё РїР°СЂР°Р»Р»РµР»СЊРЅРѕ (РѕРґРЅРѕРІСЂРµРјРµРЅРЅРѕ)
- РЎРёРЅС…СЂРѕРЅРёР·РёСЂСѓРµС‚ СЃРѕСЃС‚РѕСЏРЅРёРµ Р·Р°РіСЂСѓР·РєРё РґР»СЏ РІСЃРµС… РёСЃС‚РѕС‡РЅРёРєРѕРІ
- РџСЂРµРґРѕСЃС‚Р°РІР»СЏРµС‚ РµРґРёРЅСѓСЋ С„СѓРЅРєС†РёСЋ `refreshAll()` РґР»СЏ РѕР±РЅРѕРІР»РµРЅРёСЏ РІСЃРµС… РґР°РЅРЅС‹С…
- РџСЂР°РІРёР»СЊРЅРѕ РѕР±СЂР°Р±Р°С‚С‹РІР°РµС‚ Stale-While-Revalidate РїР°С‚С‚РµСЂРЅ

### 2. РћР±РЅРѕРІР»РµРЅ С…СѓРє: `components/hooks/useDepartments.js`

**РР·РјРµРЅРµРЅС‹ РїР°СЂР°РјРµС‚СЂС‹ РєРµС€РёСЂРѕРІР°РЅРёСЏ**

| РџР°СЂР°РјРµС‚СЂ      | Р‘С‹Р»Рѕ   | РЎС‚Р°Р»Рѕ      | РџСЂРёС‡РёРЅР°               |
| ------------- | ------ | ---------- | --------------------- |
| **TTL**       | 10 РјРёРЅ | **60 РјРёРЅ** | РћС‚РґРµР»С‹ РјРµРЅСЏСЋС‚СЃСЏ СЂРµРґРєРѕ |
| **staleTime** | 5 РјРёРЅ  | **30 РјРёРЅ** | РћР±РЅРѕРІР»СЏРµРј РІ С„РѕРЅРµ СЂРµР¶Рµ |

**Р РµР·СѓР»СЊС‚Р°С‚:** РћС‚РґРµР»С‹ Р·Р°РіСЂСѓР¶Р°СЋС‚СЃСЏ РѕРґРёРЅ СЂР°Р· Рё РїРµСЂРµРёСЃРїРѕР»СЊР·СѓСЋС‚СЃСЏ РІ С‚РµС‡РµРЅРёРµ С‡Р°СЃР°.

### 3. РћР±РЅРѕРІР»РµРЅ РєРѕРјРїРѕРЅРµРЅС‚: `app/users/index.jsx`

**РРЅС‚РµРіСЂРёСЂРѕРІР°РЅР° РїР°СЂР°Р»Р»РµР»СЊРЅР°СЏ Р·Р°РіСЂСѓР·РєР°**

```javascript
// Р‘Р«Р›Рћ: РїРѕСЃР»РµРґРѕРІР°С‚РµР»СЊРЅРѕ Р·Р°РіСЂСѓР¶Р°Р»Рё РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№ Рё РѕС‚РґРµР»С‹
const { users, isLoading: usersLoading } = useUsers({...});
const { departments, isLoading: departmentsLoading } = useDepartments({...});
const isLoading = usersLoading || departmentsLoading;

// РЎРўРђР›Рћ: РѕРґРЅРѕРІСЂРµРјРµРЅРЅРѕ Р·Р°РіСЂСѓР¶Р°РµРј РѕР±Р° РёСЃС‚РѕС‡РЅРёРєР°
const { users, departments, isLoading, refreshAll } = useParallelDataLoad({
  users: { hook: useUsers, options: {...} },
  departments: { hook: useDepartments, options: {...} },
});
```

---

## рџЋЇ Р§С‚Рѕ СѓР»СѓС‡С€РёР»РѕСЃСЊ

| РџР°СЂР°РјРµС‚СЂ             | Р‘С‹Р»Рѕ            | РЎС‚Р°Р»Рѕ                  | РЈР»СѓС‡С€РµРЅРёРµ              |
| -------------------- | --------------- | ---------------------- | ---------------------- |
| **РњРµСЂС†Р°РЅРёРµ РѕС‚РґРµР»РѕРІ** | РљР°Р¶РґС‹Р№ СЂР°Р·      | РўРѕР»СЊРєРѕ РїРµСЂРІС‹Р№ СЂР°Р·      | вњ… **РЈСЃС‚СЂР°РЅРµРЅРѕ**       |
| **Р’СЂРµРјСЏ Р·Р°РіСЂСѓР·РєРё**   | РџРѕСЃР»РµРґРѕРІР°С‚РµР»СЊРЅРѕ | РџР°СЂР°Р»Р»РµР»СЊРЅРѕ            | вњ… **Р‘С‹СЃС‚СЂРµРµ РЅР° ~40%** |
| **Р—Р°РїСЂРѕСЃС‹ Рє Р‘Р”**     | РљР°Р¶РґС‹Р№ СЂР°Р·      | 1 СЂР°Р· РІ 60 РјРёРЅСѓС‚       | вњ… **Р­РєРѕРЅРѕРјРёСЏ ~60x**   |
| **РџР°С‚С‚РµСЂРЅ РєРµС€Р°**     | Standard TTL    | Stale-While-Revalidate | вњ… **Р›СѓС‡С€Рµ UX**        |
| **Realtime**         | РћС‚РґРµР»СЊРЅРѕ        | РЎРёРЅС…СЂРѕРЅРёР·РёСЂРѕРІР°РЅРѕ       | вњ… **РљРѕРЅСЃРёСЃС‚РµРЅС‚РЅРѕ**    |

---

## рџ”„ РљР°Рє СЌС‚Рѕ СЂР°Р±РѕС‚Р°РµС‚

### РџРµСЂРІС‹Р№ РІРёР·РёС‚ (С…РѕР»РѕРґРЅС‹Р№ СЃС‚Р°СЂС‚)

```
ParallelDataLoad РёРЅРёС†РёРёСЂСѓРµС‚:
  в”њв”Ђ useUsers()        в†’ Р·Р°РїСЂРѕСЃ Рє СЃРµСЂРІРµСЂСѓ
  в””в”Ђ useDepartments()  в†’ Р·Р°РїСЂРѕСЃ Рє СЃРµСЂРІРµСЂСѓ
        (РїР°СЂР°Р»Р»РµР»СЊРЅРѕ, РЅРµ Р¶РґРµРј РѕРґРёРЅ РґР»СЏ Р·Р°РїСѓСЃРєР° РґСЂСѓРіРѕРіРѕ)
             в†“
        Р”Р°РЅРЅС‹Рµ РєРµС€РёСЂСѓСЋС‚СЃСЏ (TTL: 60 РјРёРЅ)
```

### РџРѕСЃР»РµРґСѓСЋС‰РёРµ РІРёР·РёС‚С‹ (РІ С‚РµС‡РµРЅРёРµ 60 РјРёРЅСѓС‚)

```
ParallelDataLoad РёРЅРёС†РёРёСЂСѓРµС‚:
  в”њв”Ђ useUsers()        в†’ РёР· РљР•РЁРђ (РјРіРЅРѕРІРµРЅРЅРѕ вљЎ)
  в””в”Ђ useDepartments()  в†’ РёР· РљР•РЁРђ (РјРіРЅРѕРІРµРЅРЅРѕ вљЎ)
        в†“
    UI РѕР±РЅРѕРІР»СЏРµС‚СЃСЏ Р±РµР· Р·Р°РґРµСЂР¶РєРё, Р±РµР· РјРµСЂС†Р°РЅРёСЏ
```

### Р§РµСЂРµР· 30 РјРёРЅСѓС‚ (РЅРѕ < 60)

```
РџРѕРєР°Р·С‹РІР°РµРј РљР­РЁРР РћР’РђРќРќР«Р• РґР°РЅРЅС‹Рµ (Stale-While-Revalidate)
        в†“
    Р’ Р¤РћРќР•: РѕР±РЅРѕРІР»СЏРµРј РґР°РЅРЅС‹Рµ СЃ СЃРµСЂРІРµСЂР°
        в†“
    РђРІС‚РѕРјР°С‚РёС‡РµСЃРєРѕРµ РѕР±РЅРѕРІР»РµРЅРёРµ UI (РµСЃР»Рё С‡С‚Рѕ-С‚Рѕ РёР·РјРµРЅРёР»РѕСЃСЊ)
```

---

## рџ’Ў РўРµС…РЅРёС‡РµСЃРєРёРµ РґРµС‚Р°Р»Рё

### РЎР»РѕРё Р°СЂС…РёС‚РµРєС‚СѓСЂС‹

1. **`DataCache`** (lib/cache/DataCache.js)
   - Р“Р»РѕР±Р°Р»СЊРЅС‹Р№ РєРµС€ СЃ TTL Рё deDuplicate
   - РђРІС‚РѕРјР°С‚РёС‡РµСЃРєР°СЏ РѕС‡РёСЃС‚РєР° СѓСЃС‚Р°СЂРµРІС€РёС… РґР°РЅРЅС‹С…

2. **`useQueryWithCache`** (components/hooks/useQueryWithCache.js)
   - РђРІС‚РѕРјР°С‚РёС‡РµСЃРєРѕРµ РєРµС€РёСЂРѕРІР°РЅРёРµ СЂРµР·СѓР»СЊС‚Р°С‚РѕРІ
   - Stale-While-Revalidate РїР°С‚С‚РµСЂРЅ
   - РђРІС‚РѕРјР°С‚РёС‡РµСЃРєРёР№ retry РїСЂРё РѕС€РёР±РєР°С…

3. **`useRealtimeSync`** (components/hooks/useRealtimeSync.js)
   - РђРІС‚РѕРјР°С‚РёС‡РµСЃРєР°СЏ СЃРёРЅС…СЂРѕРЅРёР·Р°С†РёСЏ РїСЂРё РёР·РјРµРЅРµРЅРёСЏС… Р‘Р”
   - Realtime РѕР±РЅРѕРІР»РµРЅРёСЏ Р±РµР· РїРѕР»РЅРѕР№ РїРµСЂРµР·Р°РіСЂСѓР·РєРё

4. **`useParallelDataLoad`** (NEW!)
   - РћСЂРєРµСЃС‚СЂР°С‚РѕСЂ РґР»СЏ РѕРґРЅРѕРІСЂРµРјРµРЅРЅРѕР№ Р·Р°РіСЂСѓР·РєРё
   - РЎРёРЅС…СЂРѕРЅРёР·РёСЂСѓРµС‚ СЃРѕСЃС‚РѕСЏРЅРёРµ РЅРµСЃРєРѕР»СЊРєРёС… С…СѓРєРѕРІ
   - РџСЂРµРґРѕСЃС‚Р°РІР»СЏРµС‚ РµРґРёРЅС‹Р№ РёРЅС‚РµСЂС„РµР№СЃ

---

## рџ“љ Р”РѕРєСѓРјРµРЅС‚Р°С†РёСЏ

РЎРѕР·РґР°РЅС‹ 2 С„Р°Р№Р»Р° РґРѕРєСѓРјРµРЅС‚Р°С†РёРё:

1. **`PARALLEL_LOADING_SOLUTION.md`** вЂ” РїРѕРґСЂРѕР±РЅРѕРµ РѕРїРёСЃР°РЅРёРµ СЂРµС€РµРЅРёСЏ
2. **`QUICK_REFERENCE_PARALLEL_LOADING.md`** вЂ” Р±С‹СЃС‚СЂР°СЏ СЃРїСЂР°РІРєР° РґР»СЏ СЂР°Р·СЂР°Р±РѕС‚С‡РёРєРѕРІ

---

## рџ§Є РљР°Рє РїСЂРѕС‚РµСЃС‚РёСЂРѕРІР°С‚СЊ

1. РћС‚РєСЂРѕР№С‚Рµ СЃС‚СЂР°РЅРёС†Сѓ Users
2. Р—Р°РјРµС‚СЊС‚Рµ РІСЂРµРјСЏ Р·Р°РіСЂСѓР·РєРё РѕС‚РґРµР»РѕРІ
3. Р—Р°РєСЂРѕР№С‚Рµ Рё РѕС‚РєСЂРѕР№С‚Рµ СЃС‚СЂР°РЅРёС†Сѓ СЃРЅРѕРІР° (РІ С‚РµС‡РµРЅРёРµ 60 РјРёРЅСѓС‚)
4. **РћР¶РёРґР°РµРјС‹Р№ СЂРµР·СѓР»СЊС‚Р°С‚:**
   - вњ… РћС‚РґРµР»С‹ Р·Р°РіСЂСѓР¶Р°СЋС‚СЃСЏ РјРіРЅРѕРІРµРЅРЅРѕ (РёР· РєРµС€Р°)
   - вњ… РќРµС‚ РјРµСЂС†Р°РЅРёСЏ
   - вњ… РќРµС‚ РґРѕРїРѕР»РЅРёС‚РµР»СЊРЅС‹С… Р·Р°РїСЂРѕСЃРѕРІ Рє СЃРµСЂРІРµСЂСѓ

Р•СЃР»Рё РёР·РјРµРЅРёС‚СЊ РѕС‚РґРµР»С‹ РІ Р‘Р”:

- Р§РµСЂРµР· Realtime РѕР±РЅРѕРІР»РµРЅРёСЏ Р±СѓРґСѓС‚ РѕС‚СЂР°Р¶РµРЅС‹ Р°РІС‚РѕРјР°С‚РёС‡РµСЃРєРё

---

## рџ”— Р’СЃРїРѕРјРѕРіР°С‚РµР»СЊРЅС‹Рµ СЃСЃС‹Р»РєРё

- Pull-to-refresh: `onRefresh` РІС‹Р·С‹РІР°РµС‚ `refreshAll()` РґР»СЏ РѕР±РЅРѕРІР»РµРЅРёСЏ РІСЃРµС… РґР°РЅРЅС‹С…
- Filter reset: РџСЂРё СЃР±СЂРѕСЃРµ С„РёР»СЊС‚СЂРѕРІ РїРµСЂРµСЃС‡РёС‚С‹РІР°РµС‚СЃСЏ `queryKey` в†’ РїРµСЂРµР·Р°РіСЂСѓР·РєР° РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№
- Department map: РњРµРјРѕРёР·РёСЂРѕРІР°РЅР° РґР»СЏ Р±С‹СЃС‚СЂРѕРіРѕ РїРѕРёСЃРєР° РїРѕ ID

---

## вњЁ Р РµР·СѓР»СЊС‚Р°С‚

**РџСЂРѕС„РµСЃСЃРёРѕРЅР°Р»СЊРЅРѕРµ, РјР°СЃС€С‚Р°Р±РёСЂСѓРµРјРѕРµ СЂРµС€РµРЅРёРµ РґР»СЏ СѓРїСЂР°РІР»РµРЅРёСЏ РєРµС€РµРј РґР°РЅРЅС‹С…, РєРѕС‚РѕСЂРѕРµ:**

- РЈСЃС‚СЂР°РЅСЏРµС‚ РІРёР·СѓР°Р»СЊРЅРѕРµ РјРµСЂС†Р°РЅРёРµ вњ…
- РЈРјРµРЅСЊС€Р°РµС‚ РЅР°РіСЂСѓР·РєСѓ РЅР° Р‘Р” вњ…
- РЈР»СѓС‡С€Р°РµС‚ UX РїСЂРёР»РѕР¶РµРЅРёСЏ вњ…
- РњРѕР¶РµС‚ Р±С‹С‚СЊ Р»РµРіРєРѕ Р°РґР°РїС‚РёСЂРѕРІР°РЅРѕ РґР»СЏ РґСЂСѓРіРёС… СЃС‚СЂР°РЅРёС† вњ…

---

**РљРѕРјРјРёС‚:** `git add . && git commit -m "auto-commit" && git push` вњ…
